<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é—¯å…³å­¦ä»£ç ï¼šæ‰“é€ å°Pçš„â€œçŸ¥è¯†åº“â€</title>
    <style>
        /* CSS Reset and Basic Styles */
        body, h1, h2, h3, h4, p, pre, code, ul, li, div {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            line-height: 1.8;
            background-color: #f0f2f5;
            color: #333;
            padding: 20px;
        }

        /* Main Container */
        .container {
            max-width: 900px;
            margin: 20px auto;
            background-color: #ffffff;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            padding: 30px 40px;
            border: 1px solid #e8e8e8;
        }

        /* Headings */
        h1 {
            color: #2c3e50;
            font-size: 2.4em;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .intro {
            font-size: 1.1em;
            color: #555;
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 2px solid #e67e22;
            padding-bottom: 20px;
        }

        /* Level Card Style */
        .level-card {
            background-color: #ffffff;
            border: 1px solid #ddd;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            transition: all 0.3s ease-in-out;
            border-left: 5px solid #e67e22;
        }

        .level-card h2 {
            color: #e67e22;
            font-size: 2em;
            margin-bottom: 20px;
        }
        
        h3 {
            color: #16a085;
            margin-top: 25px;
            margin-bottom: 10px;
            font-size: 1.5em;
        }

        .objective {
            font-style: italic;
            color: #7f8c8d;
            margin-bottom: 20px;
            padding: 10px 15px;
            background: #ecf0f1;
            border-radius: 6px;
            border-left: 3px solid #7f8c8d;
        }

        /* Code Blocks */
        pre {
            background-color: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            line-height: 1.6;
        }
        pre code {
            font-family: "Fira Code", "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
            font-size: 0.95em;
        }
        
        /* Analysis & Example Sections */
        .analysis, .example-section {
            margin-top: 20px;
            padding: 15px;
            background: #fdfdfd;
            border: 1px dashed #ccc;
            border-radius: 8px;
        }
        .analysis h4, .example-section h4 {
            color: #27ae60;
            margin-bottom: 10px;
        }
        .analysis ul { list-style-position: inside; padding-left: 10px; }
        .analysis li { margin-bottom: 8px; }
        .analysis code, .example-section code {
            background-color: #e8e8e8;
            color: #c0392b;
            padding: 2px 5px;
            border-radius: 4px;
        }

        /* Quiz Section */
        .quiz-section {
            margin-top: 25px;
            padding: 20px;
            background-color: #fff8e1;
            border: 1px solid #ffecb3;
            border-radius: 8px;
        }
        .quiz-section h4 { color: #f39c12; }
        .quiz-options div { margin: 10px 0; }
        .quiz-options label { margin-left: 8px; cursor: pointer; }
        .feedback {
            margin-top: 10px;
            font-weight: bold;
            padding: 8px;
            border-radius: 4px;
            display: none;
        }
        .feedback.correct { color: #27ae60; background-color: #e8f5e9; }
        .feedback.incorrect { color: #c0392b; background-color: #fbe9e7; }

        /* Buttons */
        .quiz-submit-btn, .unlock-btn {
            display: inline-block;
            margin-top: 15px;
            padding: 10px 20px;
            font-size: 1.05em;
            font-weight: bold;
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .quiz-submit-btn { background-color: #f39c12; }
        .quiz-submit-btn:hover { background-color: #d35400; }
        .unlock-btn { background: linear-gradient(90deg, #e67e22, #d35400); }
        .unlock-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(230, 126, 34, 0.4); }
        .unlock-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="container">
        <h1>é—¯å…³å­¦ä»£ç ï¼šæ‰“é€ å°Pçš„â€œçŸ¥è¯†åº“â€</h1>
        <p class="intro">
            æ¬¢è¿æ¥åˆ°æ–°çš„æŒ‘æˆ˜ï¼è¿™æ¬¡ï¼Œæˆ‘ä»¬è¦æ•™å°På¦‚ä½•â€œå­¦ä¹ â€å’Œâ€œè®°å¿†â€ã€‚æˆ‘ä»¬å°†é€šè¿‡æ‰“é€ ä¸€ä¸ªæœ¬åœ°çŸ¥è¯†åº“ï¼Œè®©å°Pèƒ½å›ç­”æˆ‘ä»¬çš„é—®é¢˜ã€‚å‡†å¤‡å¥½æ¢ç´¢Pythonå­—å…¸çš„å¥¥ç§˜äº†å—ï¼Ÿ
        </p>

        <!-- Level 1: Dictionary -->
        <div id="level-1" class="level-card">
            <h2>å…³å¡ 1ï¼šçŸ¥è¯†çš„æ ¸å¿ƒ (Pythonå­—å…¸)</h2>
            <p class="objective">å­¦ä¹ ç›®æ ‡ï¼šç†è§£Pythonä¸­æœ€é‡è¦çš„æ•°æ®ç»“æ„ä¹‹ä¸€â€”â€”å­—å…¸ï¼ˆDictionaryï¼‰ï¼Œå®ƒä½¿ç”¨â€œé”®-å€¼â€å¯¹æ¥å­˜å‚¨ä¿¡æ¯ã€‚</p>
            
            <div class="example-section">
                <h4>ä¸¾ä¸ªä¾‹å­ ğŸ“–</h4>
                <p>å­—å…¸å°±åƒä¸€æœ¬çœŸæ­£çš„å­—å…¸æˆ–é€šè®¯å½•ã€‚æ¯ä¸ªâ€œé”®â€ï¼ˆkeyï¼Œå¦‚ä¸€ä¸ªå•è¯æˆ–äººåï¼‰éƒ½å¯¹åº”ä¸€ä¸ªâ€œå€¼â€ï¼ˆvalueï¼Œå¦‚å•è¯çš„é‡Šä¹‰æˆ–ç”µè¯å·ç ï¼‰ã€‚</p>
                <pre><code># åˆ›å»ºä¸€ä¸ªç®€å•çš„é€šè®¯å½•å­—å…¸
phone_book = {
    "å°æ˜": "13800138000",
    "å°çº¢": "13900139000"
}

# é€šè¿‡â€œé”®â€æ¥æŸ¥æ‰¾â€œå€¼â€
print(phone_book["å°æ˜"]) # è¾“å‡ºå°†ä¼šæ˜¯: 13800138000</code></pre>
            </div>

            <h3>åº”ç”¨åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­</h3>
            <p>å°Pçš„â€œå¤§è„‘â€å°±æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œé—®é¢˜æ˜¯â€œé”®â€ï¼Œç­”æ¡ˆæ˜¯â€œå€¼â€ã€‚</p>
            <pre><code>KNOWLEDGE_BASE = {
    "pythonæ˜¯ä»€ä¹ˆ": "Pythonæ˜¯ä¸€ç§éå¸¸æµè¡Œçš„ç¼–ç¨‹è¯­è¨€...",
    "å°pæ˜¯è°": "æˆ‘å°±æ˜¯å°På‘€...",
    "ä½ å¥½": "ä½ å¥½å‘€ï¼å¾ˆé«˜å…´å†æ¬¡å’Œä½ å¯¹è¯ï¼"
}</code></pre>

            <div class="analysis">
                <h4>ğŸ’¡ ä»£ç è§£è¯»</h4>
                <ul>
                    <li><code>KNOWLEDGE_BASE</code> æ˜¯ä¸€ä¸ªå­—å…¸å˜é‡ã€‚</li>
                    <li>èŠ±æ‹¬å· <code>{}</code> ç”¨æ¥å®šä¹‰å­—å…¸ã€‚</li>
                    <li>æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª <code>"é”®": "å€¼"</code> çš„ç»„åˆï¼Œå¹¶ç”¨é€—å·éš”å¼€ã€‚</li>
                </ul>
            </div>
            
            <div class="quiz-section">
                <h4>ğŸ§  å°æµ‹éªŒ</h4>
                <p>æ ¹æ®ä¸Šé¢çš„ <code>KNOWLEDGE_BASE</code> å­—å…¸ï¼Œå“ªè¡Œä»£ç å¯ä»¥æ­£ç¡®è·å–åˆ° "æˆ‘å°±æ˜¯å°På‘€..." è¿™ä¸ªç­”æ¡ˆï¼Ÿ</p>
                <div class="quiz-options">
                    <div><input type="radio" id="q1a" name="quiz1" value="a" data-correct="true"><label for="q1a"><code>KNOWLEDGE_BASE["å°pæ˜¯è°"]</code></label></div>
                    <div><input type="radio" id="q1b" name="quiz1" value="b"><label for="q1b"><code>KNOWLEDGE_BASE[1]</code></label></div>
                    <div><input type="radio" id="q1c" name="quiz1" value="c"><label for="q1c"><code>KNOWLEDGE_BASE("å°pæ˜¯è°")</code></label></div>
                </div>
                <button class="quiz-submit-btn" data-level="1">æäº¤ç­”æ¡ˆ</button>
                <p class="feedback" id="feedback-1"></p>
            </div>
            
            <button class="unlock-btn" data-unlock="level-2" disabled>æˆ‘ç†è§£å­—å…¸äº†ï¼Œä¸‹ä¸€å…³ï¼</button>
        </div>

        <!-- Level 2: Add/Modify Dictionary -->
        <div id="level-2" class="level-card hidden">
            <h2>å…³å¡ 2ï¼šæ•™æˆ‘æ–°çŸ¥è¯† (æ·»åŠ ä¸ä¿®æ”¹å­—å…¸)</h2>
            <p class="objective">å­¦ä¹ ç›®æ ‡ï¼šå­¦ä¹ å¦‚ä½•å‘å­—å…¸ä¸­æ·»åŠ æ–°çš„é”®å€¼å¯¹ï¼Œä»¥åŠå¦‚ä½•ä¿®æ”¹å·²å­˜åœ¨çš„é”®æ‰€å¯¹åº”çš„å€¼ã€‚</p>

            <div class="example-section">
                <h4>ä¸¾ä¸ªä¾‹å­ ğŸ“</h4>
                <p>æˆ‘ä»¬å¯ä»¥éšæ—¶æ›´æ–°æˆ‘ä»¬çš„é€šè®¯å½•ã€‚</p>
                <pre><code>phone_book = {"å°æ˜": "123"}

# æ·»åŠ ä¸€ä¸ªæ–°è”ç³»äºº
phone_book["å°åˆš"] = "456" 
# ç°åœ¨ phone_book æ˜¯ {"å°æ˜": "123", "å°åˆš": "456"}

# ä¿®æ”¹ä¸€ä¸ªå·²æœ‰è”ç³»äººçš„å·ç 
phone_book["å°æ˜"] = "789" 
# ç°åœ¨ phone_book æ˜¯ {"å°æ˜": "789", "å°åˆš": "456"}</code></pre>
            </div>

            <h3>åº”ç”¨åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­</h3>
            <pre><code>def add_knowledge(question, answer):
    # å¯¹é—®é¢˜è¿›è¡Œæ¸…æ´—ï¼Œå˜æˆç»Ÿä¸€æ ¼å¼çš„é”®
    question_key = question.lower().strip()
    
    KNOWLEDGE_BASE[question_key] = answer.strip()
    return f"å¥½å˜ï¼Œæˆ‘å·²ç»è®°ä½äº†..."</code></pre>

            <div class="analysis">
                <h4>ğŸ’¡ ä»£ç è§£è¯»</h4>
                <ul>
                    <li><code>question.lower()</code> æŠŠé—®é¢˜ä¸­çš„æ‰€æœ‰å¤§å†™å­—æ¯è½¬ä¸ºå°å†™ã€‚</li>
                    <li><code>.strip()</code> å»æ‰é—®é¢˜å’Œç­”æ¡ˆä¸¤ç«¯çš„ç©ºæ ¼ã€‚è¿™æ ·åšå¯ä»¥ä¿è¯é”®çš„è§„èŒƒæ€§ã€‚</li>
                    <li><code>KNOWLEDGE_BASE[question_key] = answer.strip()</code> è¿™è¡Œä»£ç æ˜¯æ ¸å¿ƒï¼å¦‚æœ <code>question_key</code> åœ¨å­—å…¸ä¸­ä¸å­˜åœ¨ï¼Œå°±æ·»åŠ è¿™ä¸ªæ–°çŸ¥è¯†ï¼›å¦‚æœå·²å­˜åœ¨ï¼Œå°±ç”¨æ–°çš„ç­”æ¡ˆè¦†ç›–æ—§çš„ç­”æ¡ˆã€‚</li>
                </ul>
            </div>
            
            <div class="quiz-section">
                <h4>ğŸ§  å°æµ‹éªŒ</h4>
                <p>å¦‚æœ <code>KNOWLEDGE_BASE</code> ä¸­å·²ç»æœ‰äº† <code>"ä½ å¥½": "ä½ å¥½å‘€ï¼"</code>ã€‚æ­¤æ—¶æˆ‘ä»¬æ‰§è¡Œ `add_knowledge("ä½ å¥½", "Hello!")`ï¼Œé‚£ä¹ˆå†æ¬¡æŸ¥è¯¢ "ä½ å¥½" ä¼šå¾—åˆ°ä»€ä¹ˆç»“æœï¼Ÿ</p>
                <div class="quiz-options">
                    <div><input type="radio" id="q2a" name="quiz2" value="a"><label for="q2a">ç¨‹åºä¼šæŠ¥é”™ï¼Œå› ä¸ºé”®å·²å­˜åœ¨ã€‚</label></div>
                    <div><input type="radio" id="q2b" name="quiz2" value="b"><label for="q2b">"ä½ å¥½å‘€ï¼"</label></div>
                    <div><input type="radio" id="q2c" name="quiz2" value="c" data-correct="true"><label for="q2c">"Hello!" (æ—§çš„å€¼ä¼šè¢«æ–°çš„å€¼è¦†ç›–)</label></div>
                </div>
                <button class="quiz-submit-btn" data-level="2">æäº¤ç­”æ¡ˆ</button>
                <p class="feedback" id="feedback-2"></p>
            </div>
            
            <button class="unlock-btn" data-unlock="level-3" disabled>æˆ‘å­¦ä¼šæ•™å°Päº†ï¼</button>
        </div>
        
        <!-- Level 3: Querying -->
        <div id="level-3" class="level-card hidden">
            <h2>å…³å¡ 3ï¼šå­¦ä»¥è‡´ç”¨ (æ™ºèƒ½æŸ¥è¯¢)</h2>
            <p class="objective">å­¦ä¹ ç›®æ ‡ï¼šå­¦ä¹ å¦‚ä½•ä»çŸ¥è¯†åº“ä¸­æŸ¥è¯¢ä¿¡æ¯ï¼Œå¹¶äº†è§£ä»â€œç²¾ç¡®â€åˆ°â€œæ¨¡ç³Šâ€çš„å¤šå±‚æ¬¡æŸ¥è¯¢ç­–ç•¥ã€‚</p>
            
            <h3>åº”ç”¨åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­</h3>
            <pre><code>def query_knowledge_base(user_query):
    query_lower = user_query.lower().strip()
    
    # ç­–ç•¥1: ç²¾ç¡®åŒ¹é…
    if query_lower in KNOWLEDGE_BASE:
        return KNOWLEDGE_BASE[query_lower]

    # ç­–ç•¥2: åŒ…å«åŒ¹é… (æ›´æ™ºèƒ½ä¸€ç‚¹)
    for key_question, answer in KNOWLEDGE_BASE.items():
        if key_question in query_lower: 
             return answer
    
    return None # è¡¨ç¤ºæ²¡æ‰¾åˆ°</code></pre>
            
            <div class="analysis">
                <h4>ğŸ’¡ ä»£ç è§£è¯»ï¼šå°Pçš„æ€è€ƒæ–¹å¼</h4>
                <p>è¿™ä¸ªå‡½æ•°æ¨¡æ‹Ÿäº†å°PæŸ¥æ‰¾ç­”æ¡ˆçš„è¿‡ç¨‹ï¼Œå®ƒåˆ†ä¸¤æ­¥èµ°ï¼š</p>
                <ul>
                    <li><strong>ç¬¬ä¸€æ­¥ï¼šç²¾ç¡®åŒ¹é…ã€‚</strong>å®ƒä¼šå…ˆçœ‹çœ‹ç”¨æˆ·çš„é—®é¢˜ï¼ˆå¤„ç†åï¼‰æ˜¯å¦å’ŒçŸ¥è¯†åº“é‡Œçš„æŸä¸ªâ€œé”®â€å®Œå…¨ä¸€æ ·ã€‚æ¯”å¦‚ç”¨æˆ·é—® `pythonæ˜¯ä»€ä¹ˆ`ï¼ŒçŸ¥è¯†åº“é‡Œæ­£å¥½æœ‰è¿™ä¸ªé”®ï¼Œå°±ç›´æ¥è¿”å›ç­”æ¡ˆã€‚è¿™æ˜¯æœ€å¿«æœ€å‡†çš„æ–¹å¼ã€‚</li>
                    <li><strong>ç¬¬äºŒæ­¥ï¼šåŒ…å«åŒ¹é…ã€‚</strong>å¦‚æœç¬¬ä¸€æ­¥æ²¡æ‰¾åˆ°ï¼Œå°Pä¼šå˜å¾—â€œèªæ˜â€ä¸€ç‚¹ã€‚å®ƒä¼šéå†çŸ¥è¯†åº“é‡Œæ‰€æœ‰çš„é—®é¢˜ï¼ˆé”®ï¼‰ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰å“ªä¸ªé”®è¢«åŒ…å«åœ¨äº†ç”¨æˆ·çš„é—®é¢˜é‡Œã€‚ä¾‹å¦‚ï¼ŒçŸ¥è¯†åº“é‡Œæœ‰é”® `"å°pæ˜¯è°"`ï¼Œç”¨æˆ·é—®çš„æ˜¯ `"ä½ å¥½ï¼Œè¯·é—®å°pæ˜¯è°å‘€"`ï¼Œå› ä¸ºåè€…åŒ…å«äº†å‰è€…ï¼Œå°Pä¹Ÿèƒ½çŒœåˆ°ä½ æƒ³é—®ä»€ä¹ˆï¼Œç„¶åç»™å‡ºç­”æ¡ˆã€‚</li>
                    <li><code>.items()</code> æ–¹æ³•å¯ä»¥è®©æˆ‘ä»¬åŒæ—¶éå†å­—å…¸çš„é”®å’Œå€¼ã€‚</li>
                </ul>
            </div>
            
            <div class="quiz-section">
                <h4>ğŸ§  å°æµ‹éªŒ</h4>
                <p>çŸ¥è¯†åº“é‡Œæœ‰ä¸€ä¸ªé”®æ˜¯ `"ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·"`ã€‚å¦‚æœä¸€ä¸ªç”¨æˆ·é—® `"æˆ‘æƒ³çŸ¥é“ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·"`ï¼Œä¸Šé¢çš„ä»£ç èƒ½æ‰¾åˆ°ç­”æ¡ˆå—ï¼Ÿå¦‚æœèƒ½ï¼Œæ˜¯å“ªä¸ªç­–ç•¥ç”Ÿæ•ˆäº†ï¼Ÿ</p>
                <div class="quiz-options">
                    <div><input type="radio" id="q3a" name="quiz3" value="a"><label for="q3a">ä¸èƒ½ï¼Œå› ä¸ºé—®é¢˜ä¸å®Œå…¨ä¸€æ ·ã€‚</label></div>
                    <div><input type="radio" id="q3b" name="quiz3" value="b" data-correct="true"><label for="q3b">èƒ½ï¼Œé€šè¿‡â€œç­–ç•¥2ï¼šåŒ…å«åŒ¹é…â€ã€‚</label></div>
                    <div><input type="radio" id="q3c" name="quiz3" value="c"><label for="q3c">èƒ½ï¼Œé€šè¿‡â€œç­–ç•¥1ï¼šç²¾ç¡®åŒ¹é…â€ã€‚</label></div>
                </div>
                <button class="quiz-submit-btn" data-level="3">æäº¤ç­”æ¡ˆ</button>
                <p class="feedback" id="feedback-3"></p>
            </div>

            <button class="unlock-btn" data-unlock="level-4" disabled>æŸ¥è¯¢çš„é€»è¾‘æˆ‘ä¹Ÿæ‡‚äº†ï¼</button>
        </div>
        
        <!-- Level 4: The Menu -->
        <div id="level-4" class="level-card hidden">
            <h2>å…³å¡ 4ï¼šçŸ¥è¯†åº“ç®¡å®¶ (æ•´åˆä¸å¯åŠ¨)</h2>
            <p class="objective">å­¦ä¹ ç›®æ ‡ï¼šå°†â€œæŸ¥è¯¢â€å’Œâ€œæ·»åŠ â€åŠŸèƒ½æ•´åˆåˆ°ä¸€ä¸ªäº¤äº’èœå•ä¸­ï¼Œå¹¶ä½¿ç”¨ `if __name__ == "__main__"` æ¥åˆ›å»ºç¨‹åºçš„å…¥å£ã€‚</p>
            
            <h3>åº”ç”¨åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­</h3>
            <pre><code>def run_knowledge_menu():
    print("\nğŸ§  å°Pçš„çŸ¥è¯†åº“é—®ç­” ğŸ§ ")
    while True:
        # ... æ‰“å°èœå• ...
        choice = input("è¯·è¾“å…¥ä½ çš„é€‰æ‹© (0-2): ").strip()

        if choice == '1':
            user_question = input("ä½ æœ‰ä»€ä¹ˆé—®é¢˜æƒ³é—®å°Pï¼Ÿ...")
            answer = query_knowledge_base(user_question)
            # ... å¤„ç†å¹¶æ‰“å°ç­”æ¡ˆ
        elif choice == '2':
            new_q = input("ä½ æƒ³æ•™å°Pä»€ä¹ˆé—®é¢˜ï¼Ÿ...")
            new_a = input("ç­”æ¡ˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ...")
            result = add_knowledge(new_q, new_a)
            # ... æ‰“å°ç»“æœ
        elif choice == '0':
            break

if __name__ == "__main__":
    print("æµ‹è¯•æœ¬åœ°çŸ¥è¯†åº“æ¨¡å—...")
    run_knowledge_menu()</code></pre>
            
            <div class="analysis">
                <h4>ğŸ’¡ ä»£ç è§£è¯»</h4>
                <ul>
                    <li><code>run_knowledge_menu()</code> æ˜¯ä¸€ä¸ªæ€»ç®¡å‡½æ•°ï¼Œå®ƒç”¨ä¸€ä¸ª `while True` æ— é™å¾ªç¯æ¥æŒç»­æ˜¾ç¤ºèœå•ã€‚</li>
                    <li>æ ¹æ®ç”¨æˆ·çš„è¾“å…¥ `choice`ï¼Œå®ƒä¼šç”¨ `if/elif/else` ç»“æ„æ¥å†³å®šæ˜¯è°ƒç”¨ `query_knowledge_base` å‡½æ•°ï¼ˆé—®é—®é¢˜ï¼‰è¿˜æ˜¯ `add_knowledge` å‡½æ•°ï¼ˆæ•™çŸ¥è¯†ï¼‰ã€‚</li>
                    <li><code>if __name__ == "__main__":</code> ç¡®ä¿äº†åªæœ‰å½“æˆ‘ä»¬ç›´æ¥è¿è¡Œ `kb_handler.py` è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œ<code>run_knowledge_menu()</code> æ‰ä¼šå¯åŠ¨ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç‹¬ç«‹æµ‹è¯•è¿™ä¸ªæ¨¡å—çš„åŠŸèƒ½ã€‚</li>
                </ul>
            </div>

            <div class="quiz-section">
                <h4>ğŸ§  å°æµ‹éªŒ</h4>
                <p>åœ¨ `run_knowledge_menu` å‡½æ•°ä¸­ï¼Œ`break` è¯­å¥çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
                <div class="quiz-options">
                    <div><input type="radio" id="q4a" name="quiz4" value="a"><label for="q4a">è®©ç¨‹åºæš‚åœä¸€ä¸‹ã€‚</label></div>
                    <div><input type="radio" id="q4b" name="quiz4" value="b"><label for="q4b">é‡æ–°å¼€å§‹ `while` å¾ªç¯ã€‚</label></div>
                    <div><input type="radio" id="q4c" name="quiz4" value="c" data-correct="true"><label for="q4c">è·³å‡ºå¹¶ç»“æŸå½“å‰çš„ `while` å¾ªç¯ã€‚</label></div>
                </div>
                <button class="quiz-submit-btn" data-level="4">æäº¤ç­”æ¡ˆ</button>
                <p class="feedback" id="feedback-4"></p>
            </div>

            <button class="unlock-btn" data-unlock="final-challenge" disabled>æˆ‘å·²å…¨éƒ¨é€šå…³ï¼æŸ¥çœ‹æœ€ç»ˆä»£ç ï¼</button>
        </div>

        <!-- Final Code -->
        <div id="final-challenge" class="level-card hidden">
            <h2>ğŸ† æœ€ç»ˆæŒ‘æˆ˜ï¼šå®Œæ•´çš„çŸ¥è¯†åº“å’’è¯­ ğŸ†</h2>
            <p class="objective">å¤ªæ£’äº†ï¼ä½ å·²ç»æŒæ¡äº†æ„å»ºå°Pâ€œå¤§è„‘â€çš„æ ¸å¿ƒæŠ€æœ¯ã€‚ä¸‹é¢æ˜¯å®Œæ•´çš„ä»£ç ï¼Œå®ƒåŒ…å«äº†æˆ‘ä»¬å­¦åˆ°çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶åŠ å…¥äº†ä¸€äº›æ›´å®Œå–„çš„ç»†èŠ‚ï¼ˆæ¯”å¦‚æ›´å…¨é¢çš„é—®é¢˜æ¸…ç†å’Œæ›´æ¾æ•£çš„åŒ¹é…ï¼‰ã€‚</p>
            <div style="position: relative;">
                <button id="copy-button" style="position: absolute; top: 15px; right: 15px; background-color: #e67e22; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; opacity: 0.8; transition: all 0.3s ease;">ä¸€é”®å¤åˆ¶</button>
                <pre><code id="python-code"># features/local_kb/kb_handler.py

KNOWLEDGE_BASE = {
    "pythonæ˜¯ä»€ä¹ˆ": "Pythonæ˜¯ä¸€ç§éå¸¸æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ï¼Œç®€å•æ˜“å­¦ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼æˆ‘ä»¬ç°åœ¨å°±åœ¨ç”¨Pythonæ¥åˆ›é€ æˆ‘å“¦ï¼",
    "å°pæ˜¯è°": "æˆ‘å°±æ˜¯å°På‘€ï¼Œä¸€ä¸ªæ­£åœ¨å­¦ä¹ æˆé•¿çš„AIåŠ©æ‰‹ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ï¼",
    "ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·": "æˆ‘ç°åœ¨è¿˜ä¸èƒ½è”ç½‘çœ‹å¤©æ°”å‘¢ï¼Œä¸è¿‡ä½ å¯ä»¥é—®é—®æˆ‘åˆ«çš„é—®é¢˜ï¼",
    "æˆ‘ä»¬ç­æœ‰å¤šå°‘äºº": "è¿™ä¸ªé—®é¢˜æˆ‘éœ€è¦ä½ å‘Šè¯‰æˆ‘ç­”æ¡ˆï¼Œç„¶åæˆ‘å°±èƒ½è®°ä½äº†ï¼ä¸‹æ¬¡ä½ é—®æˆ‘ï¼Œæˆ‘å°±èƒ½å›ç­”å•¦ï¼",
    "ä½ ä¼šåšä»€ä¹ˆ": "æˆ‘ä¼šå’Œä½ èŠå¤©ï¼Œå¸®ä½ è®°äº‹ï¼Œè®²æ•…äº‹ï¼Œç©éšæœºé­”æ³•ï¼Œè¿˜èƒ½å›ç­”ä¸€äº›æˆ‘çŸ¥é“çš„é—®é¢˜ï¼",
    "ä½ å¥½": "ä½ å¥½å‘€ï¼å¾ˆé«˜å…´å†æ¬¡å’Œä½ å¯¹è¯ï¼" # çŸ¥è¯†åº“å†…çš„ç‰¹å®šé—®å€™
}

def add_knowledge(question, answer):
    """å‘çŸ¥è¯†åº“æ·»åŠ æ–°çš„é—®ç­”å¯¹ (ç®€å•å®ç°ï¼Œä¸æŒä¹…åŒ–ï¼Œç¨‹åºå…³é—­åä¼šä¸¢å¤±)"""
    question_key = question.lower().strip().replace("ï¼Ÿ", "").replace("?", "").replace("ï¼", "").replace("!", "")
    if not question_key:
        return "é—®é¢˜ä¸èƒ½ä¸ºç©ºå“¦ï¼"
    if not answer.strip():
        return "ç­”æ¡ˆä¸èƒ½ä¸ºç©ºå“¦ï¼"
        
    KNOWLEDGE_BASE[question_key] = answer.strip()
    return f"å¥½å˜ï¼Œæˆ‘å·²ç»è®°ä½äº†ï¼š'{question}'çš„ç­”æ¡ˆæ˜¯'{answer}'ã€‚"

def query_knowledge_base(user_query):
    """æ ¹æ®ç”¨æˆ·çš„é—®é¢˜æŸ¥è¯¢çŸ¥è¯†åº“ã€‚"""
    query_lower = user_query.lower().strip().replace("ï¼Ÿ", "").replace("?", "").replace("ï¼", "").replace("!", "")
    
    if not query_lower:
        return None # æˆ–è€…è¿”å›ä¸€ä¸ªç‰¹å®šæç¤ºï¼Œç”±è°ƒç”¨è€…å¤„ç†

    # 1. ç²¾ç¡®åŒ¹é…
    if query_lower in KNOWLEDGE_BASE:
        return KNOWLEDGE_BASE[query_lower]

    # 2. ç®€å•çš„å…³é”®è¯åŒ…å«åŒ¹é… (ç”¨æˆ·é—®é¢˜åŒ…å«çŸ¥è¯†åº“çš„æŸä¸ªé”®)
    for key_question, answer in KNOWLEDGE_BASE.items():
        if key_question in query_lower: 
             return answer
    
    # 3. æ›´æ¾æ•£çš„å…³é”®è¯åŒ¹é… (çŸ¥è¯†åº“é”®çš„è¯è¯­åœ¨ç”¨æˆ·é—®é¢˜ä¸­ï¼Œæˆ–åä¹‹)
    #    è¿™éƒ¨åˆ†éœ€è¦æ›´å°å¿ƒå¤„ç†ï¼Œé¿å…ä¸ç›¸å…³çš„åŒ¹é…ï¼Œè¿™é‡Œç®€åŒ–
    query_words = set(query_lower.split())
    for key_question, answer in KNOWLEDGE_BASE.items():
        key_q_words = set(key_question.split())
        # å¦‚æœæœ‰å…±åŒçš„è¯è¯­ï¼ˆå¿½ç•¥å¤ªçŸ­çš„è¯ï¼‰
        common_words = {w for w in query_words if len(w) > 1}.intersection({w for w in key_q_words if len(w) > 1})
        if common_words: # å¦‚æœæœ‰äº¤é›†ï¼Œå¯ä»¥è®¤ä¸ºç›¸å…³
            # è¿™é‡Œå¯ä»¥æ ¹æ®äº¤é›†è¯çš„æ•°é‡æˆ–é‡è¦æ€§æ¥å†³å®šæ˜¯å¦è¿”å›ï¼Œç°åœ¨ç®€å•è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„
            return answer

    return None # è¡¨ç¤ºæ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆ

def run_knowledge_menu():
    """æœ¬åœ°çŸ¥è¯†åº“äº¤äº’èœå•"""
    print("\nğŸ§  å°Pçš„çŸ¥è¯†åº“é—®ç­” ğŸ§ ")
    while True:
        print("\nä½ å¯ä»¥ï¼š")
        print("1. é—®å°Pä¸€ä¸ªé—®é¢˜ (ç›´æ¥åœ¨èŠå¤©ä¸­é—®ä¹Ÿå¯ä»¥)")
        print("2. æ•™å°Pæ–°çš„çŸ¥è¯†")
        print("0. è¿”å›ä¸å°PèŠå¤©")

        choice = input("è¯·è¾“å…¥ä½ çš„é€‰æ‹© (0-2): ").strip()

        if choice == '1':
            user_question = input("ä½ æœ‰ä»€ä¹ˆé—®é¢˜æƒ³é—®å°Pï¼Ÿ\nä½ ï¼š")
            answer = query_knowledge_base(user_question)
            if answer:
                print(f"å°Pï¼š{answer}")
            else:
                print(f"å°Pï¼šå—¯...è¿™ä¸ªé—®é¢˜æˆ‘ç°åœ¨è¿˜ä¸çŸ¥é“ç­”æ¡ˆå‘¢ã€‚ä¹Ÿè®¸ä½ å¯ä»¥é€šè¿‡é€‰é¡¹2æ•™æˆ‘ï¼Ÿ")
        elif choice == '2':
            new_q = input("ä½ æƒ³æ•™å°Pä»€ä¹ˆé—®é¢˜ï¼Ÿ\né—®é¢˜ï¼š")
            new_a = input(f"'{new_q}'çš„ç­”æ¡ˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\nç­”æ¡ˆï¼š")
            result = add_knowledge(new_q, new_a)
            print(f"å°Pï¼š{result}")
        elif choice == '0':
            print("å·²é€€å‡ºçŸ¥è¯†åº“é—®ç­”ã€‚")
            break
        else:
            print("æ— æ•ˆçš„é€‰æ‹©ï¼Œè¯·è¾“å…¥0åˆ°2ä¹‹é—´çš„æ•°å­—å“¦ï¼")

if __name__ == "__main__":
    print("æµ‹è¯•æœ¬åœ°çŸ¥è¯†åº“æ¨¡å—...")
    # run_knowledge_menu()
    print(f"é—®ï¼šPythonæ˜¯ä»€ä¹ˆ?  ç­”ï¼š{query_knowledge_base('Pythonæ˜¯ä»€ä¹ˆ?')}")
    print(f"é—®ï¼šå°pæ˜¯è°å‘€  ç­”ï¼š{query_knowledge_base('å°pæ˜¯è°å‘€')}")
    print(add_knowledge("åœ°çƒçš„å½¢çŠ¶", "åœ°çƒæ˜¯ä¸€ä¸ªè¿‘ä¼¼çƒå½¢çš„è¡Œæ˜Ÿã€‚"))
    print(f"é—®ï¼šåœ°çƒçš„å½¢çŠ¶æ˜¯ä»€ä¹ˆ  ç­”ï¼š{query_knowledge_base('åœ°çƒçš„å½¢çŠ¶æ˜¯ä»€ä¹ˆ')}")
    print(f"é—®ï¼šhello  ç­”ï¼š{query_knowledge_base('hello')}") # æµ‹è¯•æ‰¾ä¸åˆ°çš„æƒ…å†µ
</code></pre>
            </div>
        </div>

    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Quiz and Unlock Logic ---
        const quizButtons = document.querySelectorAll('.quiz-submit-btn');
        quizButtons.forEach(button => {
            button.addEventListener('click', () => {
                const level = button.dataset.level;
                const quizForm = button.closest('.quiz-section');
                const selectedOption = quizForm.querySelector(`input[name="quiz${level}"]:checked`);
                const feedbackEl = document.getElementById(`feedback-${level}`);
                
                if (!selectedOption) {
                    feedbackEl.textContent = "è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆï¼";
                    feedbackEl.className = 'feedback incorrect';
                    feedbackEl.style.display = 'block';
                    return;
                }

                const isCorrect = selectedOption.hasAttribute('data-correct');
                if (isCorrect) {
                    feedbackEl.textContent = "å›ç­”æ­£ç¡®ï¼å¤ªæ£’äº†ï¼ğŸ‰";
                    feedbackEl.className = 'feedback correct';
                    
                    const levelCard = button.closest('.level-card');
                    const unlockButton = levelCard.querySelector('.unlock-btn');
                    unlockButton.disabled = false;
                    
                    quizForm.querySelectorAll('input, button').forEach(el => el.disabled = true);
                } else {
                    feedbackEl.textContent = "ç­”æ¡ˆä¸å¯¹å“¦ï¼Œå†æƒ³æƒ³ï¼ŸğŸ¤”";
                    feedbackEl.className = 'feedback incorrect';
                }
                feedbackEl.style.display = 'block';
            });
        });

        // --- Unlock Button Logic ---
        const unlockButtons = document.querySelectorAll('.unlock-btn');
        unlockButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                if (button.disabled) return;
                const targetId = button.getAttribute('data-unlock');
                const nextLevel = document.getElementById(targetId);

                if (nextLevel) {
                    nextLevel.classList.remove('hidden');
                    nextLevel.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    e.target.textContent = 'å·²å®Œæˆ âœ”ï¸';
                }
            });
        });

        // --- Copy Button Logic ---
        const copyButton = document.getElementById('copy-button');
        if (copyButton) {
            const codeBlock = document.getElementById('python-code');
            copyButton.addEventListener('click', () => {
                navigator.clipboard.writeText(codeBlock.innerText).then(() => {
                    copyButton.textContent = 'å·²å¤åˆ¶!';
                    copyButton.style.backgroundColor = '#2ecc71';
                    setTimeout(() => {
                        copyButton.textContent = 'ä¸€é”®å¤åˆ¶';
                        copyButton.style.backgroundColor = '#e67e22';
                    }, 2000);
                });
            });
        }
    });
    </script>

</body>
</html>