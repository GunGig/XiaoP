<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°Pçš„å­—ç¬¦ä¸²é­”æ³•å­¦é™¢ - æ ¼å¼åŒ–è¾“å‡ºå¤§é—¯å…³</title>
    <style>
        body {
            font-family: 'Arial', 'Microsoft YaHei', sans-serif;
            line-height: 1.8;
            margin: 0;
            padding: 20px;
            background-color: #f0f8ff; /* AliceBlue */
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            max-width: 800px;
            width: 100%;
            background-color: #fff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1, h2, h3 {
            color: #007bff; /* Primary Blue */
            text-align: center;
        }
        h1 {
            border-bottom: 2px solid #0056b3;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .level {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            background-color: #f9f9f9;
        }
        .level-title {
            font-size: 1.8em;
            color: #28a745; /* Success Green */
            margin-top: 0;
            margin-bottom: 15px;
            text-align: left;
            border-left: 5px solid #28a745;
            padding-left: 10px;
        }
        .knowledge-point {
            background-color: #e9ecef; /* Light Gray */
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
        }
        .knowledge-point strong {
            color: #dc3545; /* Danger Red for emphasis */
        }
        .code-example {
            background-color: #282c34; /* Dark background for code */
            color: #abb2bf; /* Light text for code */
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            margin-bottom: 15px;
            font-size: 0.95em;
        }
        .code-example pre { margin: 0; }
        .quiz-section {
            margin-top: 20px;
        }
        /* Styles for individual question container */
        .current-question-area {
            background-color: #fff3cd; /* Light Yellow */
            padding: 20px;
            border: 1px dashed #ffeeba;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .question-text { 
            font-weight: bold;
            margin-top: 0; 
            margin-bottom: 15px;
        }
        .options label {
            display: block;
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 4px;
            background-color: #fff;
            border: 1px solid #eee;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .options label:hover {
            background-color: #f8f9fa;
        }
        .options input[type="radio"] {
            margin-right: 10px;
            vertical-align: middle;
        }
        .feedback-area {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
        }
        .feedback-area .result.correct { color: green; font-weight: bold; }
        .feedback-area .result.incorrect { color: red; font-weight: bold; }
        .feedback-area .explanation { 
            margin-top: 10px; 
            padding: 10px;
            background-color: #e2e3e5;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .navigation-buttons {
            text-align: center;
            margin-top: 20px;
        }
        .navigation-buttons button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin: 0 10px;
            transition: background-color 0.3s ease;
        }
        .navigation-buttons button:hover {
            background-color: #0056b3;
        }
        .navigation-buttons button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .hidden {
            display: none !important; /* Use !important to ensure override */
        }
        .level-badge {
            display: inline-block;
            padding: 8px 15px;
            background-color: #28a745;
            color: white;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 10px;
        }
        .intro-text { text-align: center; margin-bottom: 20px; font-size: 1.1em; }
        .emoji { font-size: 1.2em; }
    </style>
</head>
<body>

    <div class="container">
        <h1><span class="emoji">âœ¨</span>å°Pçš„å­—ç¬¦ä¸²é­”æ³•å­¦é™¢ - æ ¼å¼åŒ–è¾“å‡ºå¤§é—¯å…³<span class="emoji">âœ¨</span></h1>
        <p class="intro-text">æ¬¢è¿æ¥åˆ°å­—ç¬¦ä¸²é­”æ³•å­¦é™¢ï¼æˆ‘æ˜¯å°Pé™¢é•¿ã€‚åœ¨è¿™é‡Œï¼Œä½ å°†é€šè¿‡é—¯å…³çš„æ–¹å¼ï¼Œå­¦ä¹ Pythonä¸­è¶…é…·çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–é­”æ³•ï¼Œè®©ä½ çš„æ–‡å­—è¡¨è¾¾æ›´çµæ´»ã€æ›´å¼ºå¤§ï¼å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹ç¬¬ä¸€å…³çš„æŒ‘æˆ˜å§ï¼</p>
    </div>

    <!-- å…³å¡ 1: f-string åŸºç¡€ -->
    <div class="container level" id="level1">
        <h2 class="level-title"><span class="emoji">ğŸš©</span>ç¬¬ä¸€å…³ï¼šf-string åˆä½“éªŒ - ç¥å¥‡çš„å ä½ç¬¦</h2>
        
        <div class="knowledge-point">
            <p><strong>çŸ¥è¯†ç‚¹1ï¼šä»€ä¹ˆæ˜¯ f-stringï¼Ÿ</strong></p>
            <p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æƒ³è¯´ï¼šâ€œæˆ‘çš„åå­—æ˜¯[ä½ çš„åå­—]ï¼Œæˆ‘å–œæ¬¢[ä½ å–œæ¬¢çš„æ°´æœ]ã€‚â€ å¦‚æœæ¯æ¬¡éƒ½è¦ç”¨ <code>+</code> å·æŠŠæ–‡å­—å’Œå˜é‡æ‹¼èµ·æ¥ï¼Œä¼šå¾ˆéº»çƒ¦å¯¹ä¸å¯¹ï¼Ÿ</p>
            <p>f-string (Formatted String Literalsï¼Œæ ¼å¼åŒ–å­—ç¬¦ä¸²å­—é¢å€¼) å°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼å®ƒè®©æˆ‘ä»¬å¯ä»¥æŠŠå˜é‡è½»æ¾åœ°â€œåµŒå…¥â€åˆ°å­—ç¬¦ä¸²ä¸­ã€‚</p>
            <p><strong>æ€ä¹ˆç”¨ï¼Ÿ</strong> è¶…ç®€å•ï¼</p>
            <ol>
                <li>åœ¨å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå¼•å·å‰åŠ ä¸Šä¸€ä¸ªå°å†™å­—æ¯ <code>f</code>ã€‚</li>
                <li>åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œä½ æƒ³æ”¾å…¥å˜é‡å€¼çš„åœ°æ–¹ï¼Œç”¨èŠ±æ‹¬å· <code>{}</code> æŠŠå˜é‡ååŒ…èµ·æ¥ã€‚</li>
            </ol>
        </div>

        <div class="code-example">
<pre>
name = "å°P"
age = 1 # å‡è®¾å°Pä¸€å²å•¦
fav_food = "Pythonä»£ç "

# çœ‹ï¼Œè¿™å°±æ˜¯ f-stringï¼
greeting = f"å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯{name}ï¼Œä»Šå¹´{age}å²ï¼Œæˆ‘æœ€å–œæ¬¢åƒ{fav_food}ï¼"
print(greeting)
# è¾“å‡ºä¼šæ˜¯ï¼šå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°Pï¼Œä»Šå¹´1å²ï¼Œæˆ‘æœ€å–œæ¬¢åƒPythonä»£ç ï¼
</pre>
        </div>

        <div class="quiz-section">
            <h3><span class="emoji">âš”ï¸</span>ç¬¬ä¸€å…³æŒ‘æˆ˜ï¼š</h3>
            <div id="currentQuestion_level1" class="current-question-area">
                <!-- é¢˜ç›®å°†åŠ¨æ€åŠ è½½åˆ°è¿™é‡Œ -->
            </div>
            <div class="navigation-buttons">
                <button id="submitBtn_level1" onclick="submitSingleAnswer('level1')">æäº¤ç­”æ¡ˆ</button>
                <button id="nextBtn_level1" class="hidden" onclick="loadNextQuestion('level1')">ä¸‹ä¸€é¢˜</button>
                <button id="finishBtn_level1" class="hidden" onclick="finishLevel('level1')">å®Œæˆæœ¬å…³</button>
            </div>
        </div>
        <div class="level-badge hidden" id="badge_level1">ğŸ… ç¬¬ä¸€å…³ f-string åˆä½“éªŒ - é€šå…³ï¼</div>
    </div>

    <!-- å…³å¡ 2: f-string è¿›é˜¶ä¸ .format() åˆè¯† -->
    <div class="container level hidden" id="level2">
        <h2 class="level-title"><span class="emoji">ğŸš©</span>ç¬¬äºŒå…³ï¼šf-string è¿›é˜¶ ä¸ .format() æ–¹æ³•åˆæ¢</h2>

        <div class="knowledge-point">
            <p><strong>çŸ¥è¯†ç‚¹2ï¼šf-string çš„æ›´å¤šé­”æ³•ï¼</strong></p>
            <p>f-string çš„èŠ±æ‹¬å· <code>{}</code> é‡Œä¸ä»…èƒ½æ”¾å˜é‡åï¼Œè¿˜èƒ½è¿›è¡Œä¸€äº›ç®€å•çš„è®¡ç®—æˆ–è°ƒç”¨å‡½æ•°å“¦ï¼</p>
            <div class="code-example">
<pre>
num1 = 10
num2 = 5
print(f"æ•°å­—{num1}åŠ ä¸Šæ•°å­—{num2}ç­‰äº{num1 + num2}ã€‚") # ç›´æ¥è®¡ç®—

name = "ada lovelace"
print(f"è®¡ç®—æœºå…ˆé©±çš„åå­—æ˜¯ï¼š{name.title()}ã€‚") # è°ƒç”¨å­—ç¬¦ä¸²çš„ .title() æ–¹æ³•
</pre>
            </div>
        </div>

        <div class="knowledge-point">
            <p><strong>çŸ¥è¯†ç‚¹3ï¼šè®¤è¯† <code>.format()</code> æ–¹æ³•</strong></p>
            <p>åœ¨ f-string è¯ç”Ÿä¹‹å‰ï¼ŒPython ç¨‹åºå‘˜å¸¸ç”¨ <code>.format()</code> æ–¹æ³•æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚å®ƒä¹Ÿå¾ˆæœ‰ç”¨ï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹åŸºç¡€ç”¨æ³•ã€‚</p>
            <p><strong>æ€ä¹ˆç”¨ï¼Ÿ</strong></p>
            <ol>
                <li>åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨èŠ±æ‹¬å· <code>{}</code> ä½œä¸ºå ä½ç¬¦ã€‚</li>
                <li>åœ¨å­—ç¬¦ä¸²åé¢ç´§è·Ÿ <code>.format()</code>ï¼Œæ‹¬å·é‡ŒæŒ‰é¡ºåºæ”¾å…¥ä½ æƒ³å¡«å……åˆ°å ä½ç¬¦çš„å˜é‡æˆ–å€¼ã€‚</li>
            </ol>
            <div class="code-example">
<pre>
item = "é­”æ³•æ£’"
price = 99.8
# ä½¿ç”¨ .format()
message = "è¿™æ ¹{}ä»·å€¼{}é‡‘å¸ã€‚".format(item, price)
print(message)
# è¾“å‡ºä¼šæ˜¯ï¼šè¿™æ ¹é­”æ³•æ£’ä»·å€¼99.8é‡‘å¸ã€‚

# ä¹Ÿå¯ä»¥ç”¨æ•°å­—ç´¢å¼•æŒ‡å®šä½ç½®
message_indexed = "æˆ‘æƒ³ä¹°{1}ï¼Œè€Œä¸æ˜¯{0}ã€‚".format("æ™®é€šæœ¨æ£", "é—ªå…‰æ³•æ–")
print(message_indexed) # è¾“å‡ºï¼šæˆ‘æƒ³ä¹°é—ªå…‰æ³•æ–ï¼Œè€Œä¸æ˜¯æ™®é€šæœ¨æ£ã€‚
</pre>
            </div>
        </div>

        <div class="quiz-section">
            <h3><span class="emoji">âš”ï¸</span>ç¬¬äºŒå…³æŒ‘æˆ˜ï¼š</h3>
             <div id="currentQuestion_level2" class="current-question-area">
                <!-- é¢˜ç›®å°†åŠ¨æ€åŠ è½½åˆ°è¿™é‡Œ -->
            </div>
            <div class="navigation-buttons">
                <button id="submitBtn_level2" onclick="submitSingleAnswer('level2')">æäº¤ç­”æ¡ˆ</button>
                <button id="nextBtn_level2" class="hidden" onclick="loadNextQuestion('level2')">ä¸‹ä¸€é¢˜</button>
                <button id="finishBtn_level2" class="hidden" onclick="finishLevel('level2')">å®Œæˆæœ¬å…³</button>
            </div>
        </div>
        <div class="level-badge hidden" id="badge_level2">ğŸ… ç¬¬äºŒå…³ f-string è¿›é˜¶ä¸ .format() åˆæ¢ - é€šå…³ï¼</div>
    </div>
    
    <!-- å…³å¡ 3: .format() æ›´å¤šç”¨æ³•ä¸ç»¼åˆåº”ç”¨ -->
    <div class="container level hidden" id="level3">
        <h2 class="level-title"><span class="emoji">ğŸš©</span>ç¬¬ä¸‰å…³ï¼š.format() æ·±å…¥ ä¸ æ•…äº‹å¤§ç‹æ¼”ç»ƒ</h2>

        <div class="knowledge-point">
            <p><strong>çŸ¥è¯†ç‚¹4ï¼š<code>.format()</code> çš„å‘½åå‚æ•°</strong></p>
            <p><code>.format()</code> æ–¹æ³•é™¤äº†æŒ‰é¡ºåºæˆ–æ•°å­—ç´¢å¼•å¡«å……ï¼Œè¿˜å¯ä»¥ä½¿ç”¨â€œå‘½åå‚æ•°â€ï¼Œè¿™æ ·ä»£ç å¯è¯»æ€§ä¼šæ›´å¥½ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒå‚æ•°é¡ºåºï¼</p>
            <div class="code-example">
<pre>
hero = "çˆ±ä¸½ä¸"
enemy = "çº¢çš‡å"
action = "å‡»è´¥"

# ä½¿ç”¨å‘½åå‚æ•°
battle_report = "è‹±å‹‡çš„{h}æœ€ç»ˆ{a}äº†é‚ªæ¶çš„{e}ï¼".format(h=hero, e=enemy, a=action)
print(battle_report)
# è¾“å‡ºï¼šè‹±å‹‡çš„çˆ±ä¸½ä¸æœ€ç»ˆå‡»è´¥äº†é‚ªæ¶çš„çº¢çš‡åï¼

# æ³¨æ„ï¼šå ä½ç¬¦é‡Œçš„åå­— h, e, a å’Œ .format()ä¸­å‚æ•°åå¯¹åº”
</pre>
            </div>
        </div>

        <div class="knowledge-point">
            <p><strong>çŸ¥è¯†ç‚¹5ï¼šå®æˆ˜æ¼”ç»ƒ - å°Pæ•…äº‹å¤§ç‹</strong></p>
            <p>ç°åœ¨ï¼Œæˆ‘ä»¬å­¦ä¹ çš„æ ¼å¼åŒ–æ–¹æ³•å¯ä»¥ç”¨æ¥å¸®å°Pè®²æ•…äº‹å•¦ï¼å°Pä¼šæä¾›ä¸€ä¸ªæ•…äº‹æ¨¡æ¿ï¼Œé‡Œé¢æœ‰ä¸€äº›ç”¨ <code>{}</code> æ ‡è®°çš„ç©ºä½ï¼Œæˆ‘ä»¬éœ€è¦ç”¨å­¦åˆ°çš„æ–¹æ³•æŠŠè¯å¡«è¿›å»ã€‚</p>
            <div class="code-example">
<pre>
# æ•…äº‹æ¨¡æ¿
story_template = "åœ¨é¥è¿œçš„{place}ï¼Œä½ç€ä¸€ä½{adjective}çš„{character_type}ï¼Œåå«{name}ã€‚æœ‰ä¸€å¤©ï¼Œtaå‘ç°äº†ä¸€ä¸ªç¥ç§˜çš„{item}ï¼Œå®ƒç«Ÿç„¶ä¼š{verb}ï¼"

# æ”¶é›†è¯è¯­ (å®é™…ä¸­ä¼šç”¨ input())
place_val = "æ°´æ™¶æ´ç©´"
adj_val = "å¥½å¥‡"
char_type_val = "å°ç²¾çµ"
name_val = "è§å…‰"
item_val = "å‘å…‰è˜‘è‡"
verb_val = "å”±æ­Œ"

# ä½¿ç”¨ f-string å¡«å……
filled_story_f = f"åœ¨é¥è¿œçš„{place_val}ï¼Œä½ç€ä¸€ä½{adj_val}çš„{char_type_val}ï¼Œåå«{name_val}ã€‚æœ‰ä¸€å¤©ï¼Œtaå‘ç°äº†ä¸€ä¸ªç¥ç§˜çš„{item_val}ï¼Œå®ƒç«Ÿç„¶ä¼š{verb_val}ï¼"
print("f-stringç‰ˆæ•…äº‹:", filled_story_f)

# ä½¿ç”¨ .format() å¡«å…… (å¯ä»¥ç”¨å‘½åå‚æ•°ï¼Œä¹Ÿå¯ä»¥æŒ‰é¡ºåº)
# æ³¨æ„æ¨¡æ¿ä¸­çš„å ä½ç¬¦æ˜¯åç§°ï¼Œæ‰€ä»¥.format()ä¹Ÿè¦ç”¨å‘½åå‚æ•°
filled_story_format = story_template.format(
    place=place_val, 
    adjective=adj_val, 
    character_type=char_type_val, 
    name=name_val, 
    item=item_val, 
    verb=verb_val
)
print(".format()ç‰ˆæ•…äº‹:", filled_story_format)
</pre>
            <p><strong>é‡è¦æç¤ºï¼š</strong>å¦‚æœæ•…äº‹æ¨¡æ¿ä¸­çš„å ä½ç¬¦æ˜¯ <code>{place}</code>, <code>{adjective}</code> è¿™æ ·çš„åå­—ï¼Œé‚£ä¹ˆç”¨ <code>.format()</code> æ—¶ä¹Ÿå¿…é¡»ç”¨å¯¹åº”çš„å‘½åå‚æ•° <code>place=...</code>, <code>adjective=...</code>ã€‚å¦‚æœæ¨¡æ¿æ˜¯ç®€å•çš„ <code>{}</code> æˆ–è€… <code>{0} {1}</code>ï¼Œåˆ™å¯ä»¥æŒ‰é¡ºåºæˆ–æ•°å­—ç´¢å¼•æä¾›å‚æ•°ã€‚</p>
            </div>
        </div>

        <div class="quiz-section">
            <h3><span class="emoji">âš”ï¸</span>ç¬¬ä¸‰å…³æŒ‘æˆ˜ï¼š</h3>
            <div id="currentQuestion_level3" class="current-question-area">
                <!-- é¢˜ç›®å°†åŠ¨æ€åŠ è½½åˆ°è¿™é‡Œ -->
            </div>
            <div class="navigation-buttons">
                <button id="submitBtn_level3" onclick="submitSingleAnswer('level3')">æäº¤ç­”æ¡ˆ</button>
                <button id="nextBtn_level3" class="hidden" onclick="loadNextQuestion('level3')">ä¸‹ä¸€é¢˜</button>
                <button id="finishBtn_level3" class="hidden" onclick="finishLevel('level3')">å®Œæˆæœ¬å…³</button>
            </div>
        </div>
        <div class="level-badge hidden" id="badge_level3">ğŸ… ç¬¬ä¸‰å…³ .format() æ·±å…¥ä¸ç»¼åˆåº”ç”¨ - é€šå…³ï¼</div>
    </div>
    
    <!-- é€šå…³æ€»ç»“ -->
    <div class="container hidden" id="finalCompletion">
        <h2><span class="emoji">ğŸ‰</span>æ­å–œä½ ï¼Œå­—ç¬¦ä¸²é­”æ³•å¸ˆï¼<span class="emoji">ğŸ‰</span></h2>
        <p>ä½ å·²ç»æˆåŠŸé—¯è¿‡äº†æ‰€æœ‰å…³å¡ï¼ŒæŒæ¡äº†Pythonä¸­å¼ºå¤§çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–é­”æ³•ï¼</p>
        <ul>
            <li>ä½ ä¼šç”¨ <strong>f-string</strong> å¿«é€Ÿä¼˜é›…åœ°ç»„åˆæ–‡æœ¬å’Œå˜é‡ã€‚</li>
            <li>ä½ ä¹Ÿäº†è§£äº† <strong><code>.format()</code></strong> æ–¹æ³•ï¼ŒåŒ…æ‹¬å®ƒçš„æŒ‰é¡ºåºã€æŒ‰ç´¢å¼•å’ŒæŒ‰åç§°å¡«å……æ–¹å¼ã€‚</li>
        </ul>
        <p>è¿™äº›æŠ€èƒ½å°†å¸®åŠ©ä½ ç¼–å†™å‡ºæ›´æ¸…æ™°ã€æ›´æ˜“è¯»ã€æ›´çµæ´»çš„Pythonä»£ç ï¼Œæ— è®ºæ˜¯åœ¨åˆ¶ä½œå°æ¸¸æˆã€å¤„ç†æ•°æ®ï¼Œè¿˜æ˜¯å°†æ¥å­¦ä¹ æ›´å¤æ‚çš„ç¨‹åºï¼Œéƒ½ä¼šéå¸¸æœ‰ç”¨ï¼</p>
        <p>ç»§ç»­ä½ çš„Pythonå†’é™©ä¹‹æ—…å§ï¼å°Pé™¢é•¿ä¸ºä½ éª„å‚²ï¼<span class="emoji">ğŸ¥³</span></p>
        <div class="navigation-buttons">
            <button onclick="resetGame()">å†ç©ä¸€æ¬¡ / å›åˆ°ç¬¬ä¸€å…³</button>
        </div>
    </div>

    <script>
        const quizData = {
            level1: {
                title: "ç¬¬ä¸€å…³ï¼šf-string åˆä½“éªŒ - ç¥å¥‡çš„å ä½ç¬¦",
                questions: [
                    {
                        id: "q1_1",
                        text: "ä¸‹é¢å“ªä¸ªæ˜¯æ­£ç¡®çš„ f-string å†™æ³•ï¼Œç”¨æ¥è¾“å‡º \"æˆ‘çš„å® ç‰©æ˜¯å°ç‹—\" (å‡è®¾å˜é‡ `pet = \"å°ç‹—\"`)ï¼Ÿ",
                        type: "radio",
                        options: [
                            { value: "a", text: "A) <code>\"æˆ‘çš„å® ç‰©æ˜¯{pet}\"</code>" },
                            { value: "b", text: "B) <code>f\"æˆ‘çš„å® ç‰©æ˜¯pet\"</code>" },
                            { value: "c", text: "C) <code>f\"æˆ‘çš„å® ç‰©æ˜¯{pet}\"</code>" },
                            { value: "d", text: "D) <code>F\"æˆ‘çš„å® ç‰©æ˜¯[pet]\"</code>" }
                        ],
                        correctAnswer: "c",
                        explanation: "<strong>æ­£ç¡®ç­”æ¡ˆæ˜¯ Cã€‚</strong>f-string çš„æ­£ç¡®å†™æ³•æ˜¯åœ¨å­—ç¬¦ä¸²å‰åŠ  `f` (æˆ–`F`)ï¼Œå¹¶ç”¨èŠ±æ‹¬å· `{}` åŒ…è£¹å˜é‡åã€‚é€‰é¡¹Aç¼ºå°‘ `f`ï¼›é€‰é¡¹Bæ²¡æœ‰ç”¨èŠ±æ‹¬å·åŒ…è£¹å˜é‡ `pet`ï¼›é€‰é¡¹Dä½¿ç”¨äº†æ–¹æ‹¬å·ï¼Œåº”è¯¥æ˜¯èŠ±æ‹¬å·ã€‚"
                    },
                    {
                        id: "q1_2",
                        text: "ä½¿ç”¨ f-string æ—¶ï¼ŒèŠ±æ‹¬å· <code>{}</code> é‡Œé¢çš„å¿…é¡»æ˜¯å·²ç»å®šä¹‰å¥½çš„å˜é‡åã€‚",
                        type: "radio", // Using radio for True/False
                        options: [
                            { value: "true", text: "A) æ­£ç¡®" },
                            { value: "false", text: "B) é”™è¯¯" }
                        ],
                        correctAnswer: "true",
                        explanation: "<strong>æ­£ç¡®ç­”æ¡ˆæ˜¯ A) æ­£ç¡®ã€‚</strong>èŠ±æ‹¬å·ä¸­é€šå¸¸æ”¾å…¥å˜é‡åï¼ŒPythonä¼šæŸ¥æ‰¾è¿™ä¸ªå˜é‡çš„å€¼å¹¶æ›¿æ¢ã€‚å¦‚æœæ”¾å…¥æœªå®šä¹‰çš„å˜é‡åï¼Œç¨‹åºä¼šæŠ¥é”™ã€‚å½“ç„¶ï¼ŒèŠ±æ‹¬å·é‡Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œä½†è¡¨è¾¾å¼ä¸­çš„å˜é‡ä¹Ÿéœ€è¦æ˜¯å·²å®šä¹‰çš„ã€‚"
                    },
                    {
                        id: "q1_3",
                        text: "å¦‚æœæœ‰ä»£ç  <code>fruit = \"è‹¹æœ\"; count = 5</code>ï¼Œä¸‹é¢å“ªä¸ª f-string ä¼šè¾“å‡º \"æˆ‘æœ‰5ä¸ªè‹¹æœã€‚\"ï¼Ÿ",
                        type: "radio",
                        options: [
                            { value: "a", text: "A) <code>f\"æˆ‘æœ‰{fruit}ä¸ª{count}ã€‚\"</code>" },
                            { value: "b", text: "B) <code>f\"æˆ‘æœ‰{count}ä¸ª{fruit}ã€‚\"</code>" },
                            { value: "c", text: "C) <code>f\"æˆ‘æœ‰{count}ä¸ª{fruit}\"</code> (å°‘äº†å¥å·)" },
                            { value: "d", text: "D) <code>\"æˆ‘æœ‰\" + count + \"ä¸ª\" + fruit + \"ã€‚\"</code> (è¿™ä¸æ˜¯f-string)" }
                        ],
                        correctAnswer: "b",
                        explanation: "<strong>æ­£ç¡®ç­”æ¡ˆæ˜¯ Bã€‚</strong>ä¸ºäº†è¾“å‡º \"æˆ‘æœ‰5ä¸ªè‹¹æœã€‚\"ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ”¾å…¥å˜é‡ `count` (å€¼ä¸º5)ï¼Œå†æ”¾å…¥å˜é‡ `fruit` (å€¼ä¸º\"è‹¹æœ\")ã€‚é€‰é¡¹Açš„é¡ºåºåäº†ã€‚é€‰é¡¹Cè™½ç„¶é¡ºåºå¯¹ï¼Œä½†ç¼ºå°‘äº†å¥å·ã€‚é€‰é¡¹Dæ˜¯ä¼ ç»Ÿçš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä¸æ˜¯f-stringï¼Œå¹¶ä¸”ç›´æ¥ç”¨ `+` è¿æ¥æ•°å­—å’Œå­—ç¬¦ä¸²ä¼šæŠ¥é”™ï¼Œéœ€è¦å°†æ•°å­—è½¬ä¸ºå­—ç¬¦ä¸²ã€‚"
                    }
                ],
                nextLevelId: "level2"
            },
            level2: {
                 title: "ç¬¬äºŒå…³ï¼šf-string è¿›é˜¶ ä¸ .format() æ–¹æ³•åˆæ¢",
                 questions: [
                    {
                        id: "q2_1",
                        text: "å¦‚æœ <code>x = 3</code>ï¼Œä¸‹é¢å“ªä¸ª f-string ä¼šè¾“å‡º \"3çš„å¹³æ–¹æ˜¯9ã€‚\"ï¼Ÿ",
                        type: "radio",
                        options: [
                            { value: "a", text: "A) <code>f\"{x}çš„å¹³æ–¹æ˜¯{x^2}ã€‚\"</code> (Pythonä¸­ `^` ä¸æ˜¯å¹³æ–¹)" },
                            { value: "b", text: "B) <code>f\"{x}çš„å¹³æ–¹æ˜¯{x*x}ã€‚\"</code>" },
                            { value: "c", text: "C) <code>f\"{x}çš„å¹³æ–¹æ˜¯{pow(x,2)}ã€‚\"</code> (powå‡½æ•°ä¹Ÿå¯ä»¥)" },
                            { value: "d", text: "D) B å’Œ C éƒ½å¯ä»¥" }
                        ],
                        correctAnswer: "d",
                        explanation: "<strong>æ­£ç¡®ç­”æ¡ˆæ˜¯ Dã€‚</strong>åœ¨Pythonçš„f-stringä¸­ï¼ŒèŠ±æ‹¬å·å†…å¯ä»¥è¿›è¡Œè¡¨è¾¾å¼è®¡ç®—ã€‚<code>x*x</code> å’Œ <code>pow(x,2)</code> éƒ½èƒ½æ­£ç¡®è®¡ç®—å‡º3çš„å¹³æ–¹9ã€‚è€Œ <code>x^2</code> åœ¨Pythonä¸­æ˜¯æŒ‰ä½å¼‚æˆ–æ“ä½œï¼Œä¸æ˜¯æ±‚å¹³æ–¹ã€‚"
                    },
                    {
                        id: "q2_2",
                        text: "<code>\"æˆ‘çš„åå­—æ˜¯ {}ï¼Œå¹´é¾„æ˜¯ {}ã€‚\".format(\"å°æ˜\", 10)</code> å’Œ <code>f\"æˆ‘çš„åå­—æ˜¯ {name}ï¼Œå¹´é¾„æ˜¯ {age}ã€‚\"</code> (å‡è®¾ <code>name=\"å°æ˜\"</code>, <code>age=10</code>) çš„è¾“å‡ºç»“æœæ˜¯ä¸€æ ·çš„ã€‚",
                        type: "radio",
                        options: [
                            { value: "true", text: "A) æ­£ç¡®" },
                            { value: "false", text: "B) é”™è¯¯" }
                        ],
                        correctAnswer: "true",
                        explanation: "<strong>æ­£ç¡®ç­”æ¡ˆæ˜¯ A) æ­£ç¡®ã€‚</strong>ä¸¤ç§æ–¹å¼éƒ½æ˜¯æœ‰æ•ˆçš„å­—ç¬¦ä¸²æ ¼å¼åŒ–æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ç»™å®šæ¡ä»¶ä¸‹ï¼Œå®ƒä»¬éƒ½ä¼šäº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼š\"æˆ‘çš„åå­—æ˜¯ å°æ˜ï¼Œå¹´é¾„æ˜¯ 10ã€‚\""
                    },
                    {
                        id: "q2_3",
                        text: "å¦‚ä½•ä½¿ç”¨ <code>.format()</code> æ–¹æ³•ï¼Œè®© <code>val1 = \"è‹¹æœ\"</code>, <code>val2 = \"é¦™è•‰\"</code> è¾“å‡º \"æˆ‘å–œæ¬¢é¦™è•‰ï¼Œä¹Ÿå–œæ¬¢è‹¹æœã€‚\"ï¼Ÿ",
                        type: "radio",
                        options: [
                            { value: "a", text: "A) <code>\"æˆ‘å–œæ¬¢{}ï¼Œä¹Ÿå–œæ¬¢{}ã€‚\".format(val1, val2)</code>" },
                            { value: "b", text: "B) <code>\"æˆ‘å–œæ¬¢{1}ï¼Œä¹Ÿå–œæ¬¢{0}ã€‚\".format(val1, val2)</code>" },
                            { value: "c", text: "C) <code>\"æˆ‘å–œæ¬¢{val2}ï¼Œä¹Ÿå–œæ¬¢{val1}ã€‚\".format()</code>" },
                            { value: "d", text: "D) <code>f\"æˆ‘å–œæ¬¢{val2}ï¼Œä¹Ÿå–œæ¬¢{val1}ã€‚\"</code> (é¢˜ç›®è¦æ±‚ç”¨.format())" }
                        ],
                        correctAnswer: "b",
                        explanation: "<strong>æ­£ç¡®ç­”æ¡ˆæ˜¯ Bã€‚</strong><code>.format()</code> æ–¹æ³•çš„å‚æ•°å¯ä»¥æŒ‰æ•°å­—ç´¢å¼•è®¿é—®ï¼Œ<code>{0}</code> ä»£è¡¨ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ<code>{1}</code> ä»£è¡¨ç¬¬äºŒä¸ªå‚æ•°ã€‚é¢˜ç›®è¦æ±‚å…ˆè¾“å‡º`val2`(\"é¦™è•‰\")ï¼Œå†è¾“å‡º`val1`(\"è‹¹æœ\")ï¼Œæ‰€ä»¥æ¨¡æ¿ä¸­åº”ä¸º <code>{1}</code> ç„¶å <code>{0}</code>ï¼Œè€Œ <code>.format()</code> çš„å‚æ•°é¡ºåºæ˜¯ `(val1, val2)`ã€‚"
                    }
                ],
                nextLevelId: "level3"
            },
            level3: {
                title: "ç¬¬ä¸‰å…³ï¼š.format() æ·±å…¥ ä¸ æ•…äº‹å¤§ç‹æ¼”ç»ƒ",
                questions: [
                    {
                        id: "q3_1",
                        text: "ä»£ç  <code>\"åæ ‡ï¼š(x={x_val}, y={y_val})\"<strong>.format(x_val=10, y_val=20)</strong></code> çš„è¾“å‡ºæ˜¯ï¼Ÿ",
                        type: "radio",
                        options: [
                            { value: "a", text: "A) <code>åæ ‡ï¼š(x=10, y=20)</code>" },
                            { value: "b", text: "B) <code>åæ ‡ï¼š(x_val=10, y_val=20)</code>" },
                            { value: "c", text: "C) <code>åæ ‡ï¼š(x={10}, y={20})</code>" },
                            { value: "d", text: "D) æŠ¥é”™" }
                        ],
                        correctAnswer: "a",
                        explanation: "<strong>æ­£ç¡®ç­”æ¡ˆæ˜¯ Aã€‚</strong>å½“ä½¿ç”¨ <code>.format()</code> çš„å‘½åå‚æ•°æ—¶ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„å ä½ç¬¦ <code>{x_val}</code> å’Œ <code>{y_val}</code> ä¼šè¢« <code>.format()</code> æ–¹æ³•ä¸­å¯¹åº”åç§°çš„å‚æ•°å€¼ï¼ˆå³10å’Œ20ï¼‰æ›¿æ¢ã€‚æ‰€ä»¥ï¼Œ<code>{x_val}</code> å˜æˆäº† `10`ï¼Œè€Œä¸æ˜¯ `x_val=10`ã€‚"
                    },
                    {
                        id: "q3_2",
                        text: "å½“ä½¿ç”¨ <code>.format()</code> çš„å‘½åå‚æ•°æ—¶ï¼Œ<code>.format(name=\"å°P\", age=1)</code> å’Œ <code>.format(age=1, name=\"å°P\")</code> å¯¹äºæ¨¡æ¿ <code>\"æˆ‘æ˜¯{name}ï¼Œ{age}å²ã€‚\"</code> æ¥è¯´ï¼Œè¾“å‡ºç»“æœæ˜¯ç›¸åŒçš„ã€‚",
                        type: "radio",
                        options: [
                            { value: "true", text: "A) æ­£ç¡®" },
                            { value: "false", text: "B) é”™è¯¯" }
                        ],
                        correctAnswer: "true",
                        explanation: "<strong>æ­£ç¡®ç­”æ¡ˆæ˜¯ A) æ­£ç¡®ã€‚</strong>ä½¿ç”¨å‘½åå‚æ•°æ—¶ï¼Œå‚æ•°çš„é¡ºåºä¸é‡è¦ï¼Œå› ä¸ºPythonä¼šæ ¹æ®åç§°æ¥åŒ¹é…å ä½ç¬¦å’Œå€¼ã€‚æ‰€ä»¥ä¸¤ç§å†™æ³•éƒ½ä¼šæ­£ç¡®è¾“å‡º \"æˆ‘æ˜¯å°Pï¼Œ1å²ã€‚\""
                    },
                    {
                        id: "q3_3",
                        text: "ä½ æœ‰ä¸€ä¸ªæ•…äº‹æ¨¡æ¿ï¼š<code>story_tpl = \"ä¸»è§’æ˜¯{0}ï¼Œå®ƒçš„ç›®æ ‡æ˜¯{1}ã€‚\"</code>ï¼Œä½ æƒ³ç”¨ <code>hero_name = \"å‹‡è€…\"</code> å’Œ <code>goal = \"æ‰“è´¥é­”ç‹\"</code> æ¥å¡«å……å®ƒã€‚ä¸‹é¢å“ªä¸ªæ˜¯æ­£ç¡®çš„ï¼Ÿ",
                        type: "radio",
                        options: [
                            { value: "a", text: "A) <code>story_tpl.format(hero_name, goal)</code>" },
                            { value: "b", text: "B) <code>f\"story_tpl\"</code> (è¿™æ²¡æœ‰å¡«å……)" },
                            { value: "c", text: "C) <code>story_tpl.format(name=hero_name, aim=goal)</code> (å‘½åå‚æ•°ä¸æ¨¡æ¿ä¸ç¬¦)" },
                            { value: "d", text: "D) <code>f\"ä¸»è§’æ˜¯{hero_name}ï¼Œå®ƒçš„ç›®æ ‡æ˜¯{goal}ã€‚\"</code> (è¿™ä¹Ÿæ˜¯ä¸€ç§æ–¹æ³•ï¼Œä½†æ­¤é¢˜æ›´ä¾§é‡è€ƒå¯Ÿå¯¹æ¨¡æ¿çš„.format()åº”ç”¨)" }
                        ],
                        correctAnswer: "a",
                        explanation: "<strong>æ­£ç¡®ç­”æ¡ˆæ˜¯ Aã€‚</strong>æ¨¡æ¿ <code>story_tpl</code> ä½¿ç”¨äº†æ•°å­—ç´¢å¼•å ä½ç¬¦ <code>{0}</code> å’Œ <code>{1}</code>ã€‚å› æ­¤ï¼Œè°ƒç”¨ <code>.format()</code> æ—¶åº”æŒ‰é¡ºåºæä¾›å‚æ•°ï¼Œ<code>hero_name</code> ä¼šå¡«å……åˆ° <code>{0}</code>ï¼Œ<code>goal</code> ä¼šå¡«å……åˆ° <code>{1}</code>ã€‚é€‰é¡¹Cä½¿ç”¨äº†å‘½åå‚æ•°ï¼Œä½†æ¨¡æ¿ä¸­æ²¡æœ‰å¯¹åº”çš„å‘½åå ä½ç¬¦ã€‚é€‰é¡¹Dæ˜¯ä½¿ç”¨f-stringçš„æ­£ç¡®æ–¹æ³•ï¼Œä½†é¢˜ç›®å¯èƒ½æ›´æƒ³è€ƒå¯Ÿå¦‚ä½•ä½¿ç”¨ç»™å®šçš„æ¨¡æ¿å˜é‡ `story_tpl`ã€‚"
                    }
                ],
                nextLevelId: null // è¡¨ç¤ºè¿™æ˜¯æœ€åä¸€å…³
            }
        };

        let currentLevelId = 'level1';
        let currentQuestionIndices = {}; // To store current question index for each level

        function renderQuestion(levelId, questionIndex) {
            const levelData = quizData[levelId];
            const questionData = levelData.questions[questionIndex];
            const questionArea = document.getElementById(`currentQuestion_${levelId}`);
            
            let optionsHtml = '';
            questionData.options.forEach(opt => {
                optionsHtml += `<label><input type="radio" name="q_${levelId}_${questionIndex}" value="${opt.value}">${opt.text}</label>`;
            });

            questionArea.innerHTML = `
                <p class="question-text"><strong>${questionIndex + 1}. ${questionData.text}</strong></p>
                <div class="options" id="options_${levelId}_${questionIndex}">${optionsHtml}</div>
                <div class="feedback-area hidden" id="feedbackArea_${levelId}_${questionIndex}">
                    <p class="result"></p>
                    <div class="explanation"></div>
                </div>
            `;
            // Show submit, hide next/finish
            document.getElementById(`submitBtn_${levelId}`).classList.remove('hidden');
            document.getElementById(`nextBtn_${levelId}`).classList.add('hidden');
            document.getElementById(`finishBtn_${levelId}`).classList.add('hidden');
        }

        function submitSingleAnswer(levelId) {
            const questionIndex = currentQuestionIndices[levelId];
            const levelData = quizData[levelId];
            const questionData = levelData.questions[questionIndex];
            const feedbackArea = document.getElementById(`feedbackArea_${levelId}_${questionIndex}`);
            const resultEl = feedbackArea.querySelector('.result');
            const explanationEl = feedbackArea.querySelector('.explanation');
            const selectedOption = document.querySelector(`input[name="q_${levelId}_${questionIndex}"]:checked`);

            if (!selectedOption) {
                alert("è¯·é€‰æ‹©ä¸€ä¸ªç­”æ¡ˆï¼");
                return;
            }

            // Disable options after submission
            const optionsContainer = document.getElementById(`options_${levelId}_${questionIndex}`);
            optionsContainer.querySelectorAll('input[type="radio"]').forEach(radio => radio.disabled = true);


            if (selectedOption.value === questionData.correctAnswer) {
                resultEl.textContent = "å›ç­”æ­£ç¡®ï¼ğŸ‘";
                resultEl.className = "result correct";
            } else {
                resultEl.textContent = "å›ç­”é”™è¯¯ï¼Œæ­£ç¡®ç­”æ¡ˆè§£æå¦‚ä¸‹ï¼š";
                resultEl.className = "result incorrect";
            }
            explanationEl.innerHTML = questionData.explanation; // Use innerHTML because explanation might contain HTML
            feedbackArea.classList.remove('hidden');

            // Show appropriate next button
            document.getElementById(`submitBtn_${levelId}`).classList.add('hidden');
            if (questionIndex < levelData.questions.length - 1) {
                document.getElementById(`nextBtn_${levelId}`).classList.remove('hidden');
            } else {
                document.getElementById(`finishBtn_${levelId}`).classList.remove('hidden');
            }
        }

        function loadNextQuestion(levelId) {
            currentQuestionIndices[levelId]++;
            renderQuestion(levelId, currentQuestionIndices[levelId]);
        }

        function finishLevel(levelId) {
            document.getElementById(`badge_${levelId}`).classList.remove('hidden');
            document.getElementById(`finishBtn_${levelId}`).classList.add('hidden'); // Hide finish button
            
            const nextLevel = quizData[levelId].nextLevelId;
            if (nextLevel) {
                // Add a button to go to the next level explicitly
                const navButtons = document.querySelector(`#${levelId} .navigation-buttons`);
                let nextLevelButton = document.getElementById(`goTo_${nextLevel}`);
                if (!nextLevelButton) { // Create if not exists
                    nextLevelButton = document.createElement('button');
                    nextLevelButton.id = `goTo_${nextLevel}`;
                    nextLevelButton.textContent = `æŒ‘æˆ˜ ${quizData[nextLevel].title.split('ï¼š')[0]}`; // Get "ç¬¬Xå…³"
                    nextLevelButton.onclick = function() { startLevel(nextLevel); };
                    navButtons.appendChild(nextLevelButton);
                }
                nextLevelButton.classList.remove('hidden');

            } else {
                // All levels completed
                setTimeout(() => {
                    document.getElementById(levelId).classList.add('hidden');
                    document.getElementById('finalCompletion').classList.remove('hidden');
                    window.scrollTo(0, document.getElementById('finalCompletion').offsetTop - 20);
                }, 1500);
            }
        }
        
        function startLevel(levelId) {
            currentLevelId = levelId;
            if (currentQuestionIndices[levelId] === undefined) {
                 currentQuestionIndices[levelId] = 0;
            }
            // Hide all levels first
            document.querySelectorAll('.level').forEach(lvl => lvl.classList.add('hidden'));
            // Show current level
            document.getElementById(levelId).classList.remove('hidden');
            // Hide "Go to next level" buttons from previous levels if any
            document.querySelectorAll('.navigation-buttons button[id^="goTo_"]').forEach(btn => {
                if (btn.id !== `goTo_${levelId}`) { // Don't hide button for current level if it was somehow created
                     btn.classList.add('hidden');
                }
            });


            renderQuestion(levelId, currentQuestionIndices[levelId]);
            window.scrollTo(0, document.getElementById(levelId).offsetTop - 20);
        }

        function resetGame() {
            document.getElementById('finalCompletion').classList.add('hidden');
            document.querySelectorAll('.level-badge').forEach(badge => badge.classList.add('hidden'));
            document.querySelectorAll('.feedback-area').forEach(fb => fb.classList.add('hidden'));
             // Remove dynamically added "Go to Next Level" buttons
            document.querySelectorAll('.navigation-buttons button[id^="goTo_"]').forEach(btn => btn.remove());


            currentQuestionIndices = {}; // Reset indices
            startLevel('level1');
        }

        // Initial load
        window.onload = function() {
            startLevel('level1');
        };
    </script>

</body>
</html>