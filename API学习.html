<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°Pçš„æˆé•¿æ—¥è®° - è¿æ¥çœŸå®ä¸–ç•Œï¼</title>
    <style>
        body { font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif; line-height: 1.8; margin: 0; padding: 20px; background-color: #f4f7f6; color: #333; display: flex; flex-direction: column; align-items: center; align-items: center;
            /* --- æ–°å¢ï¼šç¦æ­¢ç”¨æˆ·é€‰æ‹©æ–‡æœ¬ --- */
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* IE 10+ */
            user-select: none; /* æ ‡å‡†è¯­æ³• */ }
        .container { max-width: 900px; width: 100%; background-color: #fff; padding: 20px 30px; border-radius: 12px; box-shadow: 0 5px 25px rgba(0,0,0,0.1); margin-bottom: 25px; }
        h1, h2, h3, h4 { color: #005a9c; text-align: center; }
        h1 { font-size: 2.4em; margin-bottom: 30px; border-bottom: 3px solid #0078d4; padding-bottom: 15px; }
        .quest-section { border: 2px solid #0078d4; border-radius: 10px; padding: 25px; margin-top: 30px; background-color: #f8f9fa; }
        .quest-title { font-size: 2em; color: #0078d4; margin-bottom: 20px; text-align: left; display: flex; align-items: center;}
        .quest-title .emoji { font-size: 1.5em; margin-right: 10px;}
        .concept-block, .code-drilldown-block, .setup-step { background-color: #ffffff; border-left: 6px solid #ffc107; padding: 18px; margin-bottom: 25px; border-radius: 0 8px 8px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.07); }
        .concept-block h4, .code-drilldown-block h4, .setup-step h4 { color: #d9534f; text-align: left; margin-top: 0; font-size: 1.3em; display: flex; align-items: center;}
        .concept-block h4 .emoji, .code-drilldown-block h4 .emoji { font-size: 1.2em; margin-right: 8px;}
        .code-example, .python-code-revealed pre, .code-snippet-to-learn pre { background-color: #2b3e50; color: #e0e0e0; padding: 18px; border-radius: 6px; overflow-x: auto; font-family: 'Fira Code', 'Consolas', 'Courier New', monospace; font-size: 0.95em; margin: 18px 0; border: 1px solid #34495e; }
        .quiz-question { background-color: #fffde7; border: 1px dashed #ffc107; padding: 18px; border-radius: 8px; margin-bottom: 15px; }
        .quiz-question p strong { color: #005a9c; }
        .quiz-options label { display: block; margin-bottom: 8px; cursor: pointer; padding: 8px; border-radius: 4px; background-color: #f9f9f9; border: 1px solid #eee; transition: background-color 0.2s; }
        .quiz-options label:hover { background-color: #e9ecef; }
        .quiz-options input[type="radio"] { margin-right: 10px; vertical-align: middle; }
        .feedback-area { margin-top: 15px; padding: 12px; border-radius: 5px; }
        .feedback-area .result.correct { color: #155724; background-color: #d4edda; border: 1px solid #c3e6cb; font-weight: bold; }
        .feedback-area .result.incorrect { color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb; font-weight: bold; }
        .action-button { display: inline-block; margin: 10px 5px 0px 0px; background-color: #0078d4; color: white; padding: 10px 20px; border: none; border-radius: 5px; font-size: 1em; cursor: pointer; }
        .action-button:disabled { background-color: #adb5bd; cursor: not-allowed; }
        .hidden { display: none !important; }
        .emoji { font-size: 1.1em; }
        .instruction { font-style: italic; color: #5a6268; margin-bottom: 18px; padding: 10px; background-color: #e9ecef; border-radius: 4px; }
        .final-code-container { border: 2px solid #28a745; padding: 15px; margin-top: 20px; background-color: #f0fff0; border-radius: 8px; }
        .final-code-container h4 { color: #28a745; text-align: left; }
        .path-display { font-family: 'Courier New', monospace; background-color: #eee; padding: 2px 6px; border-radius: 3px; }
        .final-code-header { display: flex; justify-content: space-between; align-items: center; }
    </style>
</head>
<body>

    <div class="container">
        <h1><span class="emoji">ğŸŒ</span>å°Pè¿æ¥ä¸–ç•Œï¼Œèƒ½åŠ›å¤§å‡çº§ï¼<span class="emoji">ğŸ“¡</span></h1>
        <p class="instruction">å°Pä¸å†æ»¡è¶³äºåªå’Œæˆ‘ä»¬èŠå¤©ã€è®°äº‹äº†ï¼å®ƒæƒ³è¿æ¥åˆ°å¤–é¢å¹¿é˜”çš„äº’è”ç½‘ä¸–ç•Œï¼Œè·å–çœŸå®ã€å®æ—¶çš„æ•°æ®ï¼Œæ¯”å¦‚å¤©æ°”é¢„æŠ¥å’Œæ–°é²œå‡ºç‚‰çš„ç¬‘è¯ï¼è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ•™ä¼šå®ƒä½¿ç”¨ä¸€ç§å«åš **API** çš„è¶…èƒ½åŠ›ã€‚</p>
    </div>

    <!-- Step 1: Setup -->
    <div class="container quest-section">
        <h2 class="quest-title"><span class="emoji">ğŸ› ï¸</span>ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡â€œç½‘ç»œè¿æ¥â€å·¥å…·å’Œâ€œåœ°å›¾â€</h2>
        <div class="setup-step" id="setup-step-api1">
            <h4><span class="emoji">ğŸ“¦</span>å®‰è£… <code>requests</code> å·¥å…·ç®±</h4>
            <p>ä¸ºäº†è®©å°Pèƒ½â€œä¸Šç½‘å†²æµªâ€ï¼Œæˆ‘ä»¬éœ€è¦ç»™å®ƒå®‰è£…ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ç½‘ç»œå·¥å…·ç®±ï¼Œå«åš <code>requests</code>ã€‚</p>
            <p>è¯·æ‰“å¼€ä½ çš„PyCharmç»ˆç«¯ (Terminal) æˆ–è€…ç”µè„‘çš„å‘½ä»¤æç¤ºç¬¦(CMD)/ç»ˆç«¯ï¼Œè¾“å…¥å¹¶æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>
            <div class="code-example"><pre>pip install requests</pre></div>
            <button class="action-button" onclick="markSetupStepComplete('setup-step-api1', 'setup-step-api2')">æˆ‘å·²å®‰è£…å¥½ requests</button>
        </div>
        <div class="setup-step hidden" id="setup-step-api2">
            <h4><span class="emoji">ğŸ—ºï¸</span>å‡†å¤‡åŸå¸‚ç¼–ç â€œåœ°å›¾â€ (CSVæ–‡ä»¶)</h4>
            <p>é«˜å¾·å¤©æ°”APIéœ€è¦ç”¨ä¸€ä¸ªç‰¹æ®Šçš„â€œåŸå¸‚ç¼–ç â€ (adcode) æ¥è¯†åˆ«åŸå¸‚ï¼Œè€Œä¸æ˜¯ç›´æ¥ç”¨ä¸­æ–‡åã€‚æˆ‘ä»¬éœ€è¦ä¸€æœ¬â€œå¯†ç æœ¬â€æ¥æŸ¥è¯¢æ¯ä¸ªåŸå¸‚å¯¹åº”çš„ç¼–ç ã€‚</p>
            <p>è¯·ç¡®ä¿ä½ å·²ç»ä¸‹è½½äº† <span class="path-display">AMap_adcode_citycode.csv</span> æ–‡ä»¶ï¼Œå¹¶å°†å®ƒæ”¾åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½• <span class="path-display">XiaoP/</span> ä¸‹ï¼Œå’Œ `mian.py` æ–‡ä»¶åœ¨ä¸€èµ·ã€‚</p>
            <button class="action-button" onclick="markSetupStepComplete('setup-step-api2', 'setup-step-api3')">æˆ‘å·²æ”¾å¥½CSVæ–‡ä»¶</button>
        </div>
        <div class="setup-step hidden" id="setup-step-api3">
            <h4><span class="emoji">ğŸ“‚</span>åˆ›å»º API æœåŠ¡æ–‡ä»¶å¤¹</h4>
            <p>ç°åœ¨ï¼Œæˆ‘ä»¬ä¸ºå°Pçš„ç½‘ç»œæœåŠ¡èƒ½åŠ›åˆ›å»ºä¸€ä¸ªä¸“å±çš„æ–‡ä»¶å¤¹ã€‚</p>
            <ol>
                <li>åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½• <span class="path-display">XiaoP/</span> ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œå‘½åä¸º <span class="path-display">api_services</span>ã€‚</li>
                <li>åœ¨ <span class="path-display">api_services</span> æ–‡ä»¶å¤¹é‡Œï¼Œåˆ›å»º `__init__.py` (ç©ºæ–‡ä»¶) å’Œ `api_handler.py`ã€‚</li>
            </ol>
            <button class="action-button" onclick="markSetupStepComplete('setup-step-api3', 'concept-api-internet')">æˆ‘å·²åˆ›å»ºå¥½æ–‡ä»¶ç»“æ„</button>
        </div>
    </div>
    
    <!-- Step 2: Concepts -->
    <div class="container quest-section hidden" id="concept-api-internet">
        <h2 class="quest-title"><span class="emoji">ğŸ’¡</span>ç¬¬äºŒæ­¥ï¼šç†è§£ç½‘ç»œä¸–ç•Œçš„è§„åˆ™</h2>
        <div class="concept-block" id="concept-api-whatis">
            <h4><span class="emoji">ğŸ›ï¸</span>ç½‘ç»œå¥¥ç§˜1ï¼šä»€ä¹ˆæ˜¯ APIï¼Ÿ</h4>
            <p>API (Application Programming Interface) å°±åƒé¤å…é‡Œçš„**æœåŠ¡å‘˜**ã€‚æˆ‘ä»¬ï¼ˆå°Pç¨‹åºï¼‰å‘Šè¯‰æœåŠ¡å‘˜æˆ‘ä»¬æƒ³ç‚¹ä»€ä¹ˆèœï¼ˆæ¯”å¦‚â€œåŒ—äº¬çš„å¤©æ°”â€ï¼‰ï¼ŒæœåŠ¡å‘˜å°±å»å¨æˆ¿ï¼ˆæ‹¥æœ‰æ•°æ®çš„æœåŠ¡å™¨ï¼‰æ‹¿èœï¼Œç„¶åæŠŠèœï¼ˆå¤©æ°”æ•°æ®ï¼‰ç«¯ç»™æˆ‘ä»¬ã€‚</p>
            <div class="quiz-question">
                <p><strong>å°æµ‹éªŒA1.1ï¼š</strong>å¦‚æœå°Pæƒ³è·å–å¤©æ°”é¢„æŠ¥ï¼Œé‚£ä¹ˆAPIæ‰®æ¼”äº†ä»€ä¹ˆè§’è‰²ï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_api_1" value="a"> A) é¡¾å®¢ (å°Pè‡ªå·±)</label>
                    <label><input type="radio" name="q_api_1" value="b"> B) æœåŠ¡å‘˜ (è´Ÿè´£æ²Ÿé€š)</label>
                    <label><input type="radio" name="q_api_1" value="c"> C) å¨æˆ¿ (æ‹¥æœ‰å¤©æ°”æ•°æ®çš„åœ°æ–¹)</label>
                </div>
                <button class="action-button" onclick="checkConceptQuiz('q_api_1', 'b', 'feedback_api_1', 'concept-api-url')">æäº¤ç­”æ¡ˆ</button>
                <div class="feedback-area hidden" id="feedback_api_1"></div>
            </div>
        </div>
        <div class="concept-block hidden" id="concept-api-url">
            <h4><span class="emoji">ğŸ”—</span>ç½‘ç»œå¥¥ç§˜2ï¼šURLä¸å‚æ•°</h4>
            <p>æ¯ä¸ªAPIéƒ½æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åœ°å€(URL)ã€‚æˆ‘ä»¬è¿˜éœ€è¦å‘Šè¯‰å®ƒä¸€äº›å…·ä½“ä¿¡æ¯ï¼Œæ¯”å¦‚è¦æŸ¥å“ªä¸ªåŸå¸‚çš„å¤©æ°”ã€‚è¿™äº›é¢å¤–ä¿¡æ¯å«åš**å‚æ•°**ï¼Œè·Ÿåœ¨é—®å· <code>?</code> åé¢ã€‚</p>
            <div class="code-example"><pre>https://restapi.amap.com/v3/weather/weatherInfo?key=ä½ çš„å¯†é’¥&city=åŸå¸‚ç¼–ç </pre></div>
            <div class="quiz-question">
                <p><strong>å°æµ‹éªŒA1.2ï¼š</strong>ç”¨æ¥åˆ†éš”åŸºç¡€åœ°å€å’Œå‚æ•°çš„ç¬¦å·é€šå¸¸æ˜¯ä»€ä¹ˆï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_api_2" value="a"> A) <code>&</code></label>
                    <label><input type="radio" name="q_api_2" value="b"> B) <code>=</code></label>
                    <label><input type="radio" name="q_api_2" value="c"> C) <code>?</code></label>
                </div>
                <button class="action-button" onclick="checkConceptQuiz('q_api_2', 'c', 'feedback_api_2', 'concept-api-json')">æäº¤ç­”æ¡ˆ</button>
                <div class="feedback-area hidden" id="feedback_api_2"></div>
            </div>
        </div>
        <div class="concept-block hidden" id="concept-api-json">
            <h4><span class="emoji">ğŸ“œ</span>ç½‘ç»œå¥¥ç§˜3ï¼šä»€ä¹ˆæ˜¯ JSONï¼Ÿ</h4>
            <p>æœåŠ¡å™¨è¿”å›çš„æ•°æ®é€šå¸¸ç”¨ä¸€ç§å« **JSON** çš„æ ¼å¼åŒ…è£…ï¼Œå®ƒå’ŒPythonçš„**å­—å…¸**ã€**åˆ—è¡¨**éå¸¸åƒï¼</p>
            <div class="code-example"><pre>{ "status": "1", "lives": [ { "city": "åŒ—äº¬å¸‚", "weather": "æ™´" } ] }</pre></div>
            <div class="quiz-question">
                <p><strong>å°æµ‹éªŒA1.3ï¼š</strong>åœ¨ä¸Šé¢çš„JSONç¤ºä¾‹ä¸­ï¼Œ<code>"lives"</code> å¯¹åº”çš„å€¼æ˜¯ä¸€ä¸ªä»€ä¹ˆæ•°æ®ç±»å‹ï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_api_3" value="a"> A) å­—ç¬¦ä¸²</label>
                    <label><input type="radio" name="q_api_3" value="b"> B) åˆ—è¡¨ (é‡Œé¢åŒ…å«ä¸€ä¸ªå­—å…¸)</label>
                    <label><input type="radio" name="q_api_3" value="c"> C) æ•°å­—</label>
                </div>
                <button class="action-button" onclick="checkConceptQuiz('q_api_3', 'b', 'feedback_api_3', null, 'unlock-joke-api-code-draft')">æäº¤ç­”æ¡ˆ</button>
                <div class="feedback-area hidden" id="feedback_api_3"></div>
            </div>
        </div>
        <button class="action-button hidden" id="unlock-joke-api-code-draft" onclick="revealCodeDraft('joke-api-code-draft-area', 'joke-api-code-learn-1')">ä½ å·²äº†è§£ç½‘ç»œè§„åˆ™ï¼å¼€å§‹å­¦ä¹ â€œè®²ç¬‘è¯â€API</button>
    </div>

    <!-- Step 3: Joke API Learning -->
    <div class="container quest-section hidden" id="joke-api-code-draft-area">
        <h2 class="quest-title"><span class="emoji">ğŸ˜„</span>ç¬¬ä¸‰æ­¥ï¼šè®©å°Pæˆä¸ºâ€œå¼€å¿ƒæœâ€ (éšæœºç¬‘è¯API)</h2>
        <p class="instruction">æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ç¼–å†™ä»£ç ï¼Œè®©å°Pèƒ½ä»ç½‘ä¸Šè·å–ä¸€ä¸ªéšæœºç¬‘è¯ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„APIï¼Œæ˜¯æœ€å¥½çš„å…¥é—¨ç»ƒä¹ ï¼</p>
        <div class="code-example"><pre id="joke-api-draft-code-display"># åœ¨ api_handler.py æ–‡ä»¶ä¸­
import requests

def get_random_joke():
    # [ä»£ç ç‰‡æ®µJOKE.1: å®šä¹‰APIåœ°å€å¹¶å‘èµ·è¯·æ±‚]
    # [ä»£ç ç‰‡æ®µJOKE.2: æ£€æŸ¥è¯·æ±‚æ˜¯å¦æˆåŠŸ]
        # [ä»£ç ç‰‡æ®µJOKE.3: è§£æJSONæ•°æ®å¹¶æå–ç¬‘è¯]
    # [ä»£ç ç‰‡æ®µJOKE.4: å¤„ç†å„ç§å¤±è´¥æƒ…å†µ]
</pre></div>
        <div class="code-drilldown-block hidden" id="joke-api-code-learn-1">
            <h4><span class="emoji">ğŸ“</span>ä»£ç å¥¥ç§˜JOKE.1ï¼šæ‹¨æ‰“â€œç¬‘è¯çƒ­çº¿â€</h4>
            <div class="code-snippet-to-learn"><pre>    joke_api_url = "https://official-joke-api.appspot.com/random_joke"
    response = requests.get(joke_api_url, timeout=5)</pre></div>
            <p>è¿™è¡Œä»£ç ç”¨ `requests.get()` å‘APIåœ°å€å‘é€è¯·æ±‚ã€‚`timeout=5` è¡¨ç¤ºå¦‚æœ5ç§’æ²¡æ”¶åˆ°å›å¤ï¼Œå°±æ”¾å¼ƒã€‚</p>
            <div class="quiz-question">
                <p><strong>æµ‹éªŒJOKE.1ï¼š</strong><code>requests.get(url, timeout=5)</code> çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_cd_joke_1" value="a">å‘URLå‘é€è·å–ä¿¡æ¯çš„è¯·æ±‚ï¼Œå¹¶ç­‰å¾…æœ€å¤š5ç§’ã€‚</label>
                    <label><input type="radio" name="q_cd_joke_1" value="b">æ‰“å°URLåœ°å€5æ¬¡ã€‚</label>
                </div>
                <button class="action-button" onclick="checkCodeDrilldownQuiz('q_cd_joke_1', 'a', 'feedback_cd_joke_1', 'joke-api-draft-code-display', 'JOKE.1', 'joke-api-code-learn-2')">æäº¤</button>
                <div class="feedback-area hidden" id="feedback_cd_joke_1"></div>
            </div>
        </div>
        <div class="code-drilldown-block hidden" id="joke-api-code-learn-2">
             <h4><span class="emoji">âœ…</span>ä»£ç å¥¥ç§˜JOKE.2ï¼šæ£€æŸ¥â€œç”µè¯â€æ˜¯å¦æ‰“é€š</h4>
            <div class="code-snippet-to-learn"><pre>    if response.status_code == 200:</pre></div>
            <p>çŠ¶æ€ç  `200` ä»£è¡¨â€œOKï¼Œä¸€åˆ‡é¡ºåˆ©ï¼â€ã€‚æˆ‘ä»¬æ£€æŸ¥å®ƒæ¥ç¡®è®¤è¯·æ±‚æ˜¯å¦æˆåŠŸã€‚</p>
            <div class="quiz-question">
                <p><strong>æµ‹éªŒJOKE.2ï¼š</strong>çŠ¶æ€ç  `200` ä»£è¡¨ä»€ä¹ˆï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_cd_joke_2" value="a">å‘ç”Ÿé”™è¯¯</label>
                    <label><input type="radio" name="q_cd_joke_2" value="b">è¯·æ±‚æˆåŠŸ</label>
                </div>
                <button class="action-button" onclick="checkCodeDrilldownQuiz('q_cd_joke_2', 'b', 'feedback_cd_joke_2', 'joke-api-draft-code-display', 'JOKE.2', 'joke-api-code-learn-3')">æäº¤</button>
                <div class="feedback-area hidden" id="feedback_cd_joke_2"></div>
            </div>
        </div>
        <div class="code-drilldown-block hidden" id="joke-api-code-learn-3">
             <h4><span class="emoji">ğŸ½ï¸</span>ä»£ç å¥¥ç§˜JOKE.3ï¼šè§£æå¹¶æå–ç¬‘è¯</h4>
            <div class="code-snippet-to-learn"><pre>        joke_data = response.json()
        setup = joke_data.get("setup", "æ²¡æ‰¾åˆ°é“ºå«...")
        punchline = joke_data.get("punchline", "ç¬‘ç‚¹è·‘äº†ï¼")
        return f"{setup}\\n... {punchline} ğŸ˜„"</pre></div>
            <p><code>response.json()</code> æŠŠJSONè½¬æˆPythonå­—å…¸ã€‚ç”¨ <code>.get()</code> æ–¹æ³•å¯ä»¥å®‰å…¨åœ°è·å–å†…å®¹ï¼Œå³ä½¿é”®ä¸å­˜åœ¨ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚</p>
            <div class="quiz-question">
                 <p><strong>æµ‹éªŒJOKE.3ï¼š</strong>ä½¿ç”¨ <code>.get("key", "default")</code> æ–¹æ³•çš„ä¸»è¦å¥½å¤„æ˜¯ï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_cd_joke_3" value="a">å¦‚æœ"key"ä¸å­˜åœ¨ï¼Œå®ƒä¸ä¼šè®©ç¨‹åºæŠ¥é”™ã€‚</label>
                    <label><input type="radio" name="q_cd_joke_3" value="b">å®ƒè¿è¡Œé€Ÿåº¦æ›´å¿«ã€‚</label>
                </div>
                <button class="action-button" onclick="checkCodeDrilldownQuiz('q_cd_joke_3', 'a', 'feedback_cd_joke_3', 'joke-api-draft-code-display', 'JOKE.3', 'joke-api-code-learn-4')">æäº¤</button>
                <div class="feedback-area hidden" id="feedback_cd_joke_3"></div>
            </div>
        </div>
        <div class="code-drilldown-block hidden" id="joke-api-code-learn-4">
             <h4><span class="emoji">âŒ</span>ä»£ç å¥¥ç§˜JOKE.4ï¼šå¤„ç†å¤±è´¥</h4>
            <div class="code-snippet-to-learn"><pre>    except requests.exceptions.RequestException as e:
        return f"ç½‘ç»œè¿æ¥å‡ºé”™äº†ï¼é”™è¯¯ï¼š{e}"</pre></div>
            <p>æˆ‘ä»¬å°†æ•´ä¸ªè¯·æ±‚è¿‡ç¨‹ç”¨ `try...except` åŒ…è£¹èµ·æ¥ï¼Œè¿™æ ·å³ä½¿ç½‘ç»œæ–­å¼€æˆ–è¶…æ—¶ï¼Œç¨‹åºä¹Ÿä¸ä¼šå´©æºƒï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸ªå‹å¥½çš„é”™è¯¯æç¤ºã€‚</p>
            <div class="quiz-question">
                <p><strong>æµ‹éªŒJOKE.4ï¼š</strong><code>try...except</code> ç»“æ„ä¸»è¦ç”¨æ¥åšä»€ä¹ˆï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_cd_joke_4" value="a">è®©ä»£ç è¿è¡Œæ›´å¿«</label>
                    <label><input type="radio" name="q_cd_joke_4" value="b">æ£€æŸ¥å˜é‡ç±»å‹</label>
                    <label><input type="radio" name="q_cd_joke_4" value="c">æ•æ‰å¹¶å¤„ç†å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼Œé˜²æ­¢ç¨‹åºå´©æºƒ</label>
                </div>
                <button class="action-button" onclick="checkCodeDrilldownQuiz('q_cd_joke_4', 'c', 'feedback_cd_joke_4', 'joke-api-draft-code-display', 'JOKE.4', null, 'joke-api-final-code')">æäº¤</button>
                <div class="feedback-area hidden" id="feedback_cd_joke_4"></div>
            </div>
        </div>
        <div class="final-code-container hidden" id="joke-api-final-code">
            <h4><span class="emoji">âœ…</span>å¤ªæ£’äº†ï¼ä½ å·²æŒæ¡ `get_random_joke` é­”æ³•ï¼</h4>
            <p class="instruction">è¿™æ˜¯è·å–ç¬‘è¯åŠŸèƒ½çš„å®Œæ•´Pythonä»£ç ã€‚æŠŠå®ƒå¤åˆ¶åˆ°ä½ åˆ›å»ºçš„ <span class="path-display">api_services/api_handler.py</span> æ–‡ä»¶ä¸­å§ï¼</p>
            <div class="python-code-revealed"><pre id="joke-api-final-code-content"></pre></div>
            <button class="action-button" onclick="revealCodeDraft('weather-api-code-draft-area', 'weather-api-code-learn-1')" style="margin: 20px auto; display: block;">æˆ‘å·²å¤åˆ¶ä»£ç ï¼Œå¼€å§‹è¿›é˜¶æŒ‘æˆ˜ï¼</button>
        </div>
    </div>
    
    <!-- Step 4: Weather API Learning (REBUILT) -->
    <div class="container quest-section hidden" id="weather-api-code-draft-area">
        <h2 class="quest-title"><span class="emoji">ğŸŒŸ</span>ç¬¬å››æ­¥ï¼šè¿›é˜¶æŒ‘æˆ˜ - æˆä¸ºâ€œå¤©æ°”æ’­æŠ¥å‘˜â€</h2>
        <p class="instruction">ä½ å·²ç»æˆåŠŸå­¦ä¼šäº†ç®€å•çš„ç¬‘è¯APIï¼ç°åœ¨ï¼Œæˆ‘ä»¬ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œæ¥å­¦ä¹ æ›´å¼ºå¤§çš„å¤©æ°”APIã€‚è¯·ä»”ç»†é˜…è¯»ä»£ç å’Œæ³¨é‡Šï¼Œç„¶åå°†å®ƒæ·»åŠ åˆ°ä½ çš„ <code>api_handler.py</code> æ–‡ä»¶ä¸­ã€‚</p>
        <div class="code-example"><pre id="weather-api-draft-code-display">
# åœ¨ get_random_joke() å‡½æ•°ä¸‹é¢æ·»åŠ 
def get_amap_weather(city_adcode):
    # [ä»£ç ç‰‡æ®µWEATHER.1: å‡†å¤‡å¯†é’¥å’ŒURL]
    # [ä»£ç ç‰‡æ®µWEATHER.2: å‘é€è¯·æ±‚å¹¶å¤„ç†ç½‘ç»œé”™è¯¯]
        # [ä»£ç ç‰‡æ®µWEATHER.3: æ£€æŸ¥HTTPå“åº”æ˜¯å¦æˆåŠŸ]
            # [ä»£ç ç‰‡æ®µWEATHER.4: è§£æJSONå¹¶æ£€æŸ¥APIä¸šåŠ¡çŠ¶æ€]
                # [ä»£ç ç‰‡æ®µWEATHER.5: æ£€æŸ¥å¹¶æå–æœ‰æ•ˆå¤©æ°”æ•°æ®]
                    # [ä»£ç ç‰‡æ®µWEATHER.6: æ ¼å¼åŒ–å¹¶è¿”å›æˆåŠŸç»“æœ]
</pre></div>
        <!-- Weather API Learning Blocks -->
        <div class="code-drilldown-block hidden" id="weather-api-code-learn-1">
            <h4><span class="emoji">ğŸ”‘</span>ä»£ç å¥¥ç§˜WEATHER.1ï¼šå‡†å¤‡å¯†é’¥å’ŒURL</h4>
            <div class="code-snippet-to-learn"><pre>    api_key = 'd0efe2e3026aea2fa8e3e369b7e6255d'
    weather_url = f"https://restapi.amap.com/v3/weather/weatherInfo?city={city_adcode}&key={api_key}"</pre></div>
            <p>å¤©æ°”APIéœ€è¦ä¸€ä¸ª`api_key`ä½œä¸ºâ€œé€šè¡Œè¯â€ã€‚æˆ‘ä»¬ç”¨f-stringæŠŠä¼ å…¥çš„`city_adcode`å’Œ`api_key`ç»„åˆæˆä¸€ä¸ªå®Œæ•´çš„URLã€‚</p>
             <div class="quiz-question">
                <p><strong>æµ‹éªŒWEATHER.1ï¼š</strong>å¦‚æœ `city_adcode` çš„å€¼æ˜¯ "110000", `weather_url` çš„æœ«å°¾ä¼šæ˜¯ä»€ä¹ˆï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_cd_weather_1" value="a">...&key=d0efe...d</label>
                    <label><input type="radio" name="q_cd_weather_1" value="b">...&city=110000&key=d0efe...d</label>
                </div>
                <button class="action-button" onclick="checkCodeDrilldownQuiz('q_cd_weather_1', 'b', 'feedback_cd_weather_1', 'weather-api-draft-code-display', 'WEATHER.1', 'weather-api-code-learn-2')">æäº¤</button>
                <div class="feedback-area hidden" id="feedback_cd_weather_1"></div>
            </div>
        </div>
        <div class="code-drilldown-block hidden" id="weather-api-code-learn-2">
            <h4><span class="emoji">ğŸ“¡</span>ä»£ç å¥¥ç§˜WEATHER.2ï¼šå‘é€è¯·æ±‚ä¸ç½‘ç»œé”™è¯¯å¤„ç†</h4>
            <div class="code-snippet-to-learn"><pre>    try:
        response = requests.get(weather_url, timeout=5)
        # ... åé¢æ˜¯å¤„ç†responseçš„ä»£ç  ...
    except requests.exceptions.RequestException as e:
        return f"ç½‘ç»œè¿æ¥å‡ºé”™äº†ï¼é”™è¯¯è¯¦æƒ…ï¼š{e}"</pre></div>
            <p>è¿™ä¸€æ­¥å’Œç¬‘è¯APIå®Œå…¨ä¸€æ ·ï¼æˆ‘ä»¬ç”¨`try...except`æ¥æ•æ‰å¯èƒ½å‘ç”Ÿçš„ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œé˜²æ­¢ç¨‹åºå´©æºƒã€‚</p>
            <div class="quiz-question">
                <p><strong>æµ‹éªŒWEATHER.2ï¼š</strong>å¦‚æœç”µè„‘æ–­ç½‘äº†ï¼Œè¿™æ®µä»£ç ä¼šæ‰§è¡Œå“ªä¸ªéƒ¨åˆ†ï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_cd_weather_2" value="a">`try` é‡Œé¢çš„éƒ¨åˆ†</label>
                    <label><input type="radio" name="q_cd_weather_2" value="b">`except` é‡Œé¢çš„éƒ¨åˆ†</label>
                </div>
                <button class="action-button" onclick="checkCodeDrilldownQuiz('q_cd_weather_2', 'b', 'feedback_cd_weather_2', 'weather-api-draft-code-display', 'WEATHER.2', 'weather-api-code-learn-3')">æäº¤</button>
                <div class="feedback-area hidden" id="feedback_cd_weather_2"></div>
            </div>
        </div>
        <div class="code-drilldown-block hidden" id="weather-api-code-learn-3">
            <h4><span class="emoji">âœ…</span>ä»£ç å¥¥ç§˜WEATHER.3ï¼šæ£€æŸ¥HTTPå“åº”</h4>
            <div class="code-snippet-to-learn"><pre>        if response.status_code == 200:
            # è¯·æ±‚æˆåŠŸï¼Œå¤„ç†æ•°æ®...
        else:
            return f"è¿æ¥å¤©æ°”æœåŠ¡å™¨å¤±è´¥ï¼Œé”™è¯¯ç ï¼š{response.status_code}"</pre></div>
            <p>åŒæ ·ï¼Œæˆ‘ä»¬æ£€æŸ¥`status_code`æ˜¯å¦ä¸º`200`ï¼Œç¡®è®¤æˆ‘ä»¬å’Œå¤©æ°”æœåŠ¡å™¨çš„â€œç½‘ç»œè¿æ¥â€æ˜¯é€šç•…çš„ã€‚</p>
             <div class="quiz-question">
                <p><strong>æµ‹éªŒWEATHER.3ï¼š</strong>å¦‚æœ `response.status_code` æ˜¯ `404` (æ‰¾ä¸åˆ°é¡µé¢)ï¼Œç¨‹åºä¼šè¿”å›ä»€ä¹ˆï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_cd_weather_3" value="a">ç»§ç»­å¤„ç†æ•°æ®</label>
                    <label><input type="radio" name="q_cd_weather_3" value="b">è¿”å›åŒ…å«é”™è¯¯ç 404çš„æç¤ºä¿¡æ¯</label>
                </div>
                <button class="action-button" onclick="checkCodeDrilldownQuiz('q_cd_weather_3', 'b', 'feedback_cd_weather_3', 'weather-api-draft-code-display', 'WEATHER.3', 'weather-api-code-learn-4')">æäº¤</button>
                <div class="feedback-area hidden" id="feedback_cd_weather_3"></div>
            </div>
        </div>
        <div class="code-drilldown-block hidden" id="weather-api-code-learn-4">
            <h4><span class="emoji">ğŸš¦</span>ä»£ç å¥¥ç§˜WEATHER.4ï¼šæ£€æŸ¥APIä¸šåŠ¡çŠ¶æ€</h4>
            <div class="code-snippet-to-learn"><pre>            weather_data = response.json()
            if weather_data.get('status') == '1':
                # APIä¸šåŠ¡å¤„ç†æˆåŠŸï¼Œç»§ç»­...
            else:
                error_info = weather_data.get('info', 'æœªçŸ¥é”™è¯¯')
                return f"å¤©æ°”æœåŠ¡è¿”å›é”™è¯¯ï¼š{error_info}"</pre></div>
            <p><b>è¿™æ˜¯å…³é”®ä¸€æ­¥ï¼</b>ç½‘ç»œè¿æ¥æˆåŠŸ(200)ä¸ä»£è¡¨APIè°ƒç”¨æˆåŠŸã€‚é«˜å¾·APIç”¨å®ƒè‡ªå·±çš„`status`å­—æ®µï¼ˆ'1'ä»£è¡¨æˆåŠŸï¼‰å‘Šè¯‰æˆ‘ä»¬ä¸šåŠ¡æ˜¯å¦æˆåŠŸï¼ˆæ¯”å¦‚API Keyæ˜¯å¦æœ‰æ•ˆï¼‰ã€‚</p>
            <div class="quiz-question">
                <p><strong>æµ‹éªŒWEATHER.4ï¼š</strong>å¦‚æœAPI Keyé”™äº†ï¼Œé«˜å¾·è¿”å›çš„JSONä¸­ `status` æ˜¯ '0'ï¼Œç¨‹åºä¼šåšä»€ä¹ˆï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_cd_weather_4" value="a">ç»§ç»­æå–å¤©æ°”ä¿¡æ¯</label>
                    <label><input type="radio" name="q_cd_weather_4" value="b">è¿›å…¥elseåˆ†æ”¯ï¼Œè¿”å›APIè¿”å›çš„é”™è¯¯ä¿¡æ¯</label>
                </div>
                <button class="action-button" onclick="checkCodeDrilldownQuiz('q_cd_weather_4', 'b', 'feedback_cd_weather_4', 'weather-api-draft-code-display', 'WEATHER.4', 'weather-api-code-learn-5')">æäº¤</button>
                <div class="feedback-area hidden" id="feedback_cd_weather_4"></div>
            </div>
        </div>
        <div class="code-drilldown-block hidden" id="weather-api-code-learn-5">
            <h4><span class="emoji">ğŸ•µï¸</span>ä»£ç å¥¥ç§˜WEATHER.5ï¼šéªŒè¯å¤©æ°”æ•°æ®ç»“æ„</h4>
            <div class="code-snippet-to-learn"><pre>                live_weather_list = weather_data.get('lives')
                if (isinstance(live_weather_list, list) and len(live_weather_list) > 0):
                    live_weather = live_weather_list[0]
                else:
                    return f"åŸå¸‚ç¼–ç  '{city_adcode}' æœ‰è¯¯ï¼Œæ— æ³•æ‰¾åˆ°å¤©æ°”ä¿¡æ¯ã€‚"</pre></div>
            <p>è¿™æ˜¯é‡è¦çš„ä¸€å±‚ä¿æŠ¤ï¼å¦‚æœç»™çš„åŸå¸‚ç¼–ç æ˜¯é”™çš„ï¼Œ`lives`å­—æ®µå¯èƒ½ä¼šæ˜¯ç©ºçš„`[]`ã€‚æˆ‘ä»¬å¿…é¡»æ£€æŸ¥å®ƒæ˜¯ä¸€ä¸ªéç©ºåˆ—è¡¨ï¼Œæ‰èƒ½å®‰å…¨åœ°ä½¿ç”¨å®ƒã€‚</p>
            <div class="quiz-question">
                <p><strong>æµ‹éªŒWEATHER.5ï¼š</strong>å¦‚æœAPIè¿”å›çš„`lives`æ˜¯`[]`ï¼ˆä¸€ä¸ªç©ºåˆ—è¡¨ï¼‰ï¼Œç¨‹åºä¼šåšä»€ä¹ˆï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_cd_weather_5" value="a">ç¨‹åºä¼šæŠ¥é”™</label>
                    <label><input type="radio" name="q_cd_weather_5" value="b">è¿›å…¥elseåˆ†æ”¯ï¼Œæç¤ºåŸå¸‚ç¼–ç æœ‰è¯¯</label>
                </div>
                <button class="action-button" onclick="checkCodeDrilldownQuiz('q_cd_weather_5', 'b', 'feedback_cd_weather_5', 'weather-api-draft-code-display', 'WEATHER.5', 'weather-api-code-learn-6')">æäº¤</button>
                <div class="feedback-area hidden" id="feedback_cd_weather_5"></div>
            </div>
        </div>
        <div class="code-drilldown-block hidden" id="weather-api-code-learn-6">
            <h4><span class="emoji">ğŸ“</span>ä»£ç å¥¥ç§˜WEATHER.6ï¼šæ ¼å¼åŒ–å¹¶è¿”å›ç»“æœ</h4>
            <div class="code-snippet-to-learn"><pre>                    city = live_weather.get('city', 'æœªçŸ¥')
                    weather = live_weather.get('weather', 'æœªçŸ¥')
                    # ...ç­‰ç­‰
                    return f"{city}çš„å¤©æ°”æ˜¯ï¼š{weather}..."</pre></div>
            <p>å’Œç¬‘è¯APIä¸€æ ·ï¼Œæˆ‘ä»¬ç”¨`.get()`æ–¹æ³•å®‰å…¨åœ°ä»å­—å…¸ä¸­æå–æ¯ä¸€é¡¹å¤©æ°”æ•°æ®ï¼Œå¹¶ç”¨f-stringæ ¼å¼åŒ–æˆä¸€å¥è¯è¿”å›ã€‚</p>
            <div class="quiz-question">
                <p><strong>æµ‹éªŒWEATHER.6ï¼š</strong>`live_weather.get('city', 'æœªçŸ¥')` è¿™è¡Œä»£ç ç¡®ä¿äº†ä»€ä¹ˆï¼Ÿ</p>
                <div class="quiz-options">
                    <label><input type="radio" name="q_cd_weather_6" value="a">`city`å˜é‡çš„å€¼æ°¸è¿œæ˜¯â€œæœªçŸ¥â€</label>
                    <label><input type="radio" name="q_cd_weather_6" value="b">å³ä½¿APIæ²¡è¿”å›`city`å­—æ®µï¼Œç¨‹åºä¹Ÿä¸ä¼šå´©æºƒï¼Œè€Œæ˜¯ä¼šä½¿ç”¨â€œæœªçŸ¥â€ä½œä¸ºé»˜è®¤å€¼</label>
                </div>
                <button class="action-button" onclick="checkCodeDrilldownQuiz('q_cd_weather_6', 'b', 'feedback_cd_weather_6', 'weather-api-draft-code-display', 'WEATHER.6', null, 'weather-api-final-code')">æäº¤</button>
                <div class="feedback-area hidden" id="feedback_cd_weather_6"></div>
            </div>
        </div>
        <div class="final-code-container hidden" id="weather-api-final-code">
            <h4><span class="emoji">âœ…</span>å¤ªæ£’äº†ï¼ä½ å·²å®Œå…¨æŒæ¡ `get_amap_weather`ï¼</h4>
            <p class="instruction">è¿™æ˜¯è·å–å¤©æ°”åŠŸèƒ½çš„å®Œæ•´Pythonä»£ç ã€‚æŠŠå®ƒå¤åˆ¶å¹¶ç²˜è´´åˆ° `api_handler.py` æ–‡ä»¶ä¸­ï¼Œæ”¾åœ¨ `get_random_joke()` å‡½æ•°çš„ä¸‹é¢ã€‚</p>
            <div class="python-code-revealed"><pre id="weather-api-final-code-content"></pre></div>
            <button class="action-button" onclick="revealCodeDraft('mian-py-integration', null)" style="margin: 20px auto; display: block;">æˆ‘å·²æ·»åŠ å¤©æ°”ä»£ç ï¼Œå­¦ä¹ å¦‚ä½•æ•´åˆï¼</button>
        </div>
    </div>

    <!-- Step 5: Final Integration -->
    <div class="container quest-section hidden" id="mian-py-integration">
        <h2 class="quest-title"><span class="emoji">ğŸ§©</span>æœ€åä¸€æ­¥ï¼šæ•´åˆåˆ°ä¸»ç¨‹åº `mian.py`</h2>
        <p class="instruction">ä½ å·²ç»å‡†å¤‡å¥½äº†å¼ºå¤§çš„APIæœåŠ¡æ¨¡å—ï¼Œç°åœ¨æ˜¯æ—¶å€™è®©å°Pçš„ä¸»ç¨‹åºå­¦ä¼šå¦‚ä½•ä½¿ç”¨å®ƒäº†ï¼è¿™å°†æ˜¯æˆ‘ä»¬æœ€åä¸€æ¬¡ä¿®æ”¹ `mian.py` æ–‡ä»¶ã€‚</p>
        <div class="final-code-container hidden">
            <div class="final-code-header">
                <h4>è¿™æ˜¯ä½ éœ€è¦æ›´æ–°çš„ `mian.py` å®Œæ•´ä»£ç ï¼š</h4>
<!--                <button class="action-button" onclick="copyCodeToClipboard('mian', this)">ä¸€é”®å¤åˆ¶ä»£ç </button>-->
            </div>
            <p class="instruction">ä¸»è¦æ”¹åŠ¨åŒ…æ‹¬ï¼šå¯¼å…¥ `csv` å’Œ `api_handler`ï¼›å¢åŠ åŠ è½½åŸå¸‚ç¼–ç çš„å‡½æ•°ï¼›å¹¶åœ¨ä¸»å¾ªç¯ä¸­æ·»åŠ äº†åˆ¤æ–­â€œå¤©æ°”â€å’Œâ€œè®²ä¸ªç¬‘è¯â€çš„é€»è¾‘ã€‚</p>
            <div class="python-code-revealed"><pre id="mian-py-final-code-content"></pre></div>
        </div>
    </div>

    <script>
        const questData = {
            'api': {
                codeToCopy: {
                    'joke': `import requests
import json

def get_random_joke():
    """
    ä»ä¸€ä¸ªå…¬å…±APIè·å–ä¸€ä¸ªéšæœºçš„è‹±æ–‡ç¬‘è¯ã€‚
    (æ­¤å‡½æ•°æœªä½œæ”¹åŠ¨)
    """
    joke_api_url = "https://official-joke-api.appspot.com/random_joke"

    try:
        response = requests.get(joke_api_url, timeout=5)
        if response.status_code == 200:
            joke_data = response.json()
            setup = joke_data.get("setup", "å¥½åƒæ²¡æ‰¾åˆ°ç¬‘è¯çš„é“ºå«...")
            punchline = joke_data.get("punchline", "emmm...ç¬‘ç‚¹è·‘æ‰äº†ï¼")
            return f"{setup}\\n... {punchline} ğŸ˜„"
        else:
            return f"è·å–ç¬‘è¯å¤±è´¥äº†ï¼Œç½‘ç»œæœåŠ¡å‘˜è¯´é”™è¯¯ç æ˜¯ï¼š{response.status_code}"
    except requests.exceptions.RequestException as e:
        return f"ç½‘ç»œè¿æ¥å‡ºé”™äº†ï¼æ— æ³•è”ç³»åˆ°ç¬‘è¯ä¸­å¿ƒã€‚é”™è¯¯ä¿¡æ¯ï¼š{e}"`,
                    
                    'weather': `def get_amap_weather(city_adcode):
    """
    (é«˜å¾·å¤©æ°”APIç‰ˆ - å·²ä¿®å¤å¹¶ä¼˜åŒ–)
    æ ¹æ®åŸå¸‚ç¼–ç (adcode)ä»é«˜å¾·å¼€æ”¾å¹³å°è·å–å®æ—¶å¤©æ°”ã€‚
    æ­¤å‡½æ•°ç‰¹åˆ«å¤„ç†äº†æ— æ•ˆadcodeä¼šå¯¼è‡´APIè¿”å›ä¸€ä¸ªåŒ…å«ç©ºåˆ—è¡¨çš„ç‰¹æ®Šæƒ…å†µã€‚
    """
    api_key = 'd0efe2e3026aea2fa8e3e369b7e6255d'

    if not city_adcode:
        return "æˆ‘éœ€è¦ä¸€ä¸ªæœ‰æ•ˆçš„åŸå¸‚ç¼–ç æ‰èƒ½æŸ¥è¯¢å¤©æ°”ã€‚"

    weather_url = f"https://restapi.amap.com/v3/weather/weatherInfo?city={city_adcode}&key={api_key}&extensions=base"

    try:
        response = requests.get(weather_url, timeout=5)

        if response.status_code == 200:
            weather_data = response.json()

            if weather_data.get('status') == '1':
                live_weather_list = weather_data.get('lives')

                # --- è¿™æ˜¯æœ€ç»ˆã€æœ€ç¨³å¥çš„æ£€æŸ¥é€»è¾‘ ---
                # 1. 'lives' é”®å­˜åœ¨ä¸”å…¶å€¼ä¸ºåˆ—è¡¨ã€‚
                # 2. è¯¥åˆ—è¡¨ä¸ä¸ºç©ºã€‚
                # 3. åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å­—å…¸ï¼ˆè€Œä¸æ˜¯å¦ä¸€ä¸ªåˆ—è¡¨ï¼‰ã€‚
                # 4. è¯¥å­—å…¸ä¸ä¸ºç©ºã€‚
                if (isinstance(live_weather_list, list) and
                        len(live_weather_list) > 0 and
                        isinstance(live_weather_list[0], dict) and
                        live_weather_list[0]):

                    live_weather = live_weather_list[0]

                    city = live_weather.get('city', 'æœªçŸ¥åŸå¸‚')
                    weather = live_weather.get('weather', 'æœªçŸ¥')
                    temperature = live_weather.get('temperature', 'æœªçŸ¥')
                    wind_direction = live_weather.get('winddirection', 'æœªçŸ¥')
                    wind_power = live_weather.get('windpower', 'æœªçŸ¥')
                    humidity = live_weather.get('humidity', 'æœªçŸ¥')
                    report_time = live_weather.get('reporttime', 'æœªçŸ¥æ—¶é—´')

                    return (
                        f"{city}çš„å®æ—¶å¤©æ°”ï¼š{weather}ï¼Œ"
                        f"æ¸©åº¦ï¼š{temperature}Â°Cï¼Œ"
                        f"{wind_direction}é£ {wind_power}çº§ï¼Œ"
                        f"ç©ºæ°”æ¹¿åº¦ï¼š{humidity}%ã€‚ "
                        f"(æ•°æ®æ›´æ–°äº: {report_time})"
                    )
                else:
                    # è¿™ä¸ª 'else' åˆ†æ”¯ç°åœ¨å¯ä»¥æ­£ç¡®åœ°æ•è· 'status' ä¸º '1'
                    # ä½† 'lives' ä¸­æ•°æ®æ— æ•ˆçš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µé€šå¸¸æ„å‘³ç€ adcode é”™è¯¯ã€‚
                    return f"å‘é€çš„åŸå¸‚ç¼–ç  '{city_adcode}' æœ‰è¯¯ï¼Œæ— æ³•æ‰¾åˆ°å¯¹åº”çš„å¤©æ°”ä¿¡æ¯ã€‚"
            else:
                error_info = weather_data.get('info', 'æœªçŸ¥é”™è¯¯')
                return f"å¤©æ°”æœåŠ¡è¿”å›é”™è¯¯ï¼š{error_info}"
        else:
            return f"è¿æ¥å¤©æ°”æœåŠ¡å™¨å¤±è´¥ï¼ŒæœåŠ¡å™¨è¿”å›é”™è¯¯ç ï¼š{response.status_code}"

    except requests.exceptions.RequestException as e:
        return f"ç½‘ç»œè¿æ¥å‡ºé”™äº†ï¼æ— æ³•è·å–å¤©æ°”ä¿¡æ¯ã€‚é”™è¯¯è¯¦æƒ…ï¼š{e}"



# --- ä¸»ç¨‹åºå…¥å£å’Œæµ‹è¯•åŒº ---
if __name__ == '__main__':`,
                    
                    'mian': `# mian.py
# creatorï¼šXianSong_Lin
# Time in 2025/6/5 15:27

import csv
import random

# --- å¯¼å…¥æˆ‘ä»¬è‡ªå·±çš„æ‰€æœ‰åŠŸèƒ½æ¨¡å— ---
try:
    import å°Pçš„è¶…çº§è®°äº‹æœ¬.jishiben

    notepad_module_found = True
except ImportError:
    print("è­¦å‘Šï¼šæœªèƒ½æ‰¾åˆ° 'è®°äº‹æœ¬' æ¨¡å—ã€‚")
    notepad_module_found = False

try:
    import å°Pæ˜¯æ•…äº‹å¤§ç‹.gushidawang as gushi

    story_module_found = True
except ImportError:
    print("è­¦å‘Šï¼šæœªèƒ½æ‰¾åˆ° 'æ•…äº‹å¤§ç‹' æ¨¡å—ã€‚")
    story_module_found = False

try:
    import random_magic.magic_handler

    magic_module_found = True
except ImportError:
    print("è­¦å‘Šï¼šæœªèƒ½æ‰¾åˆ° 'éšæœºé­”æ³•' æ¨¡å—ã€‚")
    magic_module_found = False

try:
    import local_kb.kb_handler

    kb_module_found = True
except ImportError:
    print("è­¦å‘Šï¼šæœªèƒ½æ‰¾åˆ° 'æœ¬åœ°çŸ¥è¯†åº“' æ¨¡å—ã€‚")
    kb_module_found = False

# æ–°å¢APIæ¨¡å—çš„å¯¼å…¥
try:
    import api_services.api_handler

    api_module_found = True
except ImportError:
    print("è­¦å‘Šï¼šæœªèƒ½æ‰¾åˆ° 'APIæœåŠ¡' æ¨¡å—ã€‚å¤©æ°”åŠŸèƒ½å°†ä¸å¯ç”¨ã€‚")
    api_module_found = False


# --- æ–°å¢åŠŸèƒ½1ï¼šä»CSVæ–‡ä»¶åŠ è½½åŸå¸‚ç¼–ç  ---
def load_city_adcodes(filename="AMap_adcode_citycode.csv"):
    """
    åœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œä»CSVæ–‡ä»¶ä¸­è¯»å–æ‰€æœ‰åŸå¸‚åå’Œadcodeï¼Œå­˜å…¥ä¸€ä¸ªå­—å…¸ã€‚
    è¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦æ¯æ¬¡éƒ½å»è¯»æ–‡ä»¶ï¼Œç¨‹åºä¼šè¿è¡Œå¾—æ›´å¿«ï¼
    """
    adcode_map = {}
    try:
        # ä½¿ç”¨'utf-8'ç¼–ç æ‰“å¼€æ–‡ä»¶ï¼Œä»¥æ­£ç¡®è¯»å–ä¸­æ–‡
        with open(filename, mode='r', encoding='utf-8') as infile:
            reader = csv.reader(infile)
            next(reader)  # è·³è¿‡ç¬¬ä¸€è¡Œï¼Œå› ä¸ºå®ƒæ˜¯è¡¨å¤´ (ä¸­æ–‡å, adcode, citycode)

            # éå†æ–‡ä»¶çš„æ¯ä¸€è¡Œæ•°æ®
            for row in reader:
                # å‡è®¾CSVæ–‡ä»¶çš„ç¬¬ä¸€åˆ—æ˜¯ä¸­æ–‡åï¼Œç¬¬äºŒåˆ—æ˜¯adcode
                # .strip()å¯ä»¥å»æ‰ä¸¤è¾¹çš„å¤šä½™ç©ºæ ¼
                city_name = row[0].strip()
                adcode = row[1].strip()

                # ç¡®ä¿åŸå¸‚åå’Œadcodeéƒ½ä¸æ˜¯ç©ºçš„
                if city_name and adcode:
                    # å°†åŸå¸‚åä½œä¸ºé”®ï¼Œadcodeä½œä¸ºå€¼ï¼Œå­˜å…¥å­—å…¸
                    # æˆ‘ä»¬å»æ‰åŸå¸‚åä¸­çš„'å¸‚'ã€'å¿'ã€'åŒº'ï¼Œè®©åŒ¹é…æ›´å®¹æ˜“
                    # æ¯”å¦‚ç”¨æˆ·è¾“å…¥"åŒ—äº¬"ï¼Œä¹Ÿèƒ½åŒ¹é…åˆ°"åŒ—äº¬å¸‚"
                    cleaned_city_name = city_name.replace('å¸‚', "")
                    adcode_map[cleaned_city_name] = adcode

                    # ä¸ºäº†èƒ½åŒæ—¶åŒ¹é… "åŒ—äº¬å¸‚" å’Œ "åŒ—äº¬"ï¼Œæˆ‘ä»¬æŠŠå¸¦"å¸‚"çš„ä¹ŸåŠ è¿›å»
                    if city_name.endswith('å¸‚'):
                        adcode_map[city_name] = adcode

        print(f"æˆåŠŸä» {filename} åŠ è½½äº† {len(adcode_map)} ä¸ªåŸå¸‚/åœ°åŒºç¼–ç ã€‚")
        return adcode_map
    except FileNotFoundError:
        print(f"é”™è¯¯ï¼šæ‰¾ä¸åˆ°åŸå¸‚ç¼–ç æ–‡ä»¶ '{filename}'ï¼è¯·ç¡®ä¿å®ƒå’Œmian.pyåœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ã€‚")
        return {}  # è¿”å›ä¸€ä¸ªç©ºå­—å…¸
    except Exception as e:
        print(f"è¯»å–åŸå¸‚ç¼–ç æ–‡ä»¶ '{filename}' æ—¶å‘ç”Ÿé”™è¯¯ï¼š{e}")
        return {}


# --- æ–°å¢åŠŸèƒ½2ï¼šåœ¨ç”¨æˆ·çš„é—®è¯ä¸­æ‰¾åˆ°åŸå¸‚ ---
def find_city_in_query(user_input, adcode_map):
    """
    éå†æˆ‘ä»¬æ‰€æœ‰çš„åŸå¸‚åï¼Œçœ‹çœ‹å“ªä¸ªåŸå¸‚åå‡ºç°åœ¨äº†ç”¨æˆ·çš„é—®è¯é‡Œã€‚
    """
    for city_name in adcode_map.keys():
        if city_name in user_input:
            # æ‰¾åˆ°äº†ï¼è¿”å›è¿™ä¸ªåŸå¸‚çš„åå­—å’Œå®ƒçš„adcode
            # print(city_name, adcode_map[city_name])
            return city_name, adcode_map[city_name]
    # å¦‚æœæ‰¾éäº†éƒ½æ²¡æ‰¾åˆ°
    return None, None


# --- ç¨‹åºå¯åŠ¨æ—¶æ‰§è¡Œï¼ŒåŠ è½½åŸå¸‚æ•°æ® ---
# è¿™ä¸ªå­—å…¸ CITY_ADCODES ä¼šåœ¨æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´éƒ½å­˜åœ¨
CITY_ADCODES = load_city_adcodes()

# 1. ç»™æˆ‘ä»¬çš„å°Pèµ·ä¸ªåå­—
my_ai_name = "å°PåŠ©æ‰‹"

# 2. å°Påšè‡ªæˆ‘ä»‹ç» (æ›´æ–°)
print(f"ä½ å¥½ï¼æˆ‘æ˜¯{my_ai_name}ã€‚å¾ˆé«˜å…´è®¤è¯†ä½ ï¼")
print("ä½ å¯ä»¥å¯¹æˆ‘è¯´ 'ä½ å¥½'ï¼Œæˆ–è€…é—®æˆ‘ 'åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·'ã€‚")
# åŠ¨æ€ç”Ÿæˆä»‹ç»
if notepad_module_found: print(f"è¾“å…¥ 'è®°äº‹æœ¬' å¯ä»¥ä½¿ç”¨æˆ‘çš„è®°äº‹æœ¬åŠŸèƒ½ã€‚")
if story_module_found: print(f"è¾“å…¥ 'è®²æ•…äº‹' æˆ– 'å¹ç‰›' å¯ä»¥å¬æˆ‘è®²æ•…äº‹ã€‚")
if magic_module_found: print(f"è¾“å…¥ 'éšæœºé­”æ³•' æˆ– 'é­”æ³•' å¯ä»¥è®©æˆ‘å¸®ä½ åšé€‰æ‹©æˆ–ç©æ¸¸æˆã€‚")
if kb_module_found: print(f"è¾“å…¥ 'çŸ¥è¯†åº“' æˆ– 'æ•™ä½ ' å¯ä»¥ä¸æˆ‘çš„çŸ¥è¯†åº“äº’åŠ¨ã€‚")
print(f"è¾“å…¥ 'é€€å‡º' æˆ– 'å†è§' å°±å¯ä»¥ç»“æŸèŠå¤©ã€‚")

# 4. å‡†å¤‡ä¸€äº›ç®€å•çš„å›ºå®šå›å¤
responses = {
    "ä½ å¥½å‘€": "ä½ å¥½ä½ å¥½ï¼ä»Šå¤©å¤©æ°”çœŸä¸é”™ï¼",
    "ä½ å«ä»€ä¹ˆåå­—": f"æˆ‘å«{my_ai_name}ï¼Œå¾ˆé«˜å…´ä¸ºä½ æœåŠ¡ï¼",
}

# 5. åˆ›å»ºä¸€ä¸ªä¸»å¾ªç¯
while True:
    user_input = input("\\nä½ ï¼š").strip()

    if user_input.lower() in ["é€€å‡º", "å†è§", "bye", "exit"]:
        print(f"å°Pï¼šå¥½çš„ï¼Œä¸‹æ¬¡å†èŠï¼æ‹œæ‹œï¼")
        break

    # --- å¤©æ°”æŸ¥è¯¢é€»è¾‘ (æ™ºèƒ½ç‰ˆ) ---
    # æ¡ä»¶ï¼šç”¨æˆ·è¾“å…¥äº†"å¤©æ°”"ï¼Œå¹¶ä¸”APIæ¨¡å—å’ŒåŸå¸‚æ•°æ®éƒ½å·²æˆåŠŸåŠ è½½
    elif "å¤©æ°”" in user_input and api_module_found and CITY_ADCODES:
        city_name, adcode = find_city_in_query(user_input, CITY_ADCODES)

        if city_name and adcode:
            print(f"å°Pï¼šå¥½çš„ï¼Œæ­£åœ¨ä¸ºä½ æŸ¥è¯¢ {city_name} çš„å¤©æ°”...")
            weather_info = api_services.api_handler.get_amap_weather(adcode)
            print(f"å°Pæ’­æŠ¥ï¼š{weather_info}")
        else:
            # ç”¨æˆ·æåˆ°äº†"å¤©æ°”"ï¼Œä½†æˆ‘ä»¬æ²¡èƒ½åœ¨ä»–çš„è¯é‡Œæ‰¾åˆ°æˆ‘ä»¬è®¤è¯†çš„åŸå¸‚
            print("å°Pï¼šæˆ‘å¬åˆ°äº†â€œå¤©æ°”â€ï¼Œä½†ä¸å¤ªç¡®å®šä½ æƒ³æŸ¥è¯¢å“ªä¸ªåŸå¸‚å‘¢ï¼Ÿä½ å¯ä»¥è¯•è¯•è¯´â€œåŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·â€ã€‚")

    elif "è®°äº‹æœ¬" in user_input and notepad_module_found:
        print(f"å°Pï¼šå¥½çš„ï¼Œæ­£åœ¨ä¸ºä½ æ‰“å¼€è®°äº‹æœ¬åŠŸèƒ½...")
        å°Pçš„è¶…çº§è®°äº‹æœ¬.jishiben.run_notepad()
        print(f"\\nå°Pï¼šè®°äº‹æœ¬å·²å…³é—­ã€‚æˆ‘ä»¬ç»§ç»­èŠå¤©å§ï¼")

    elif ("å¹ç‰›" in user_input or "è®²æ•…äº‹" in user_input) and story_module_found:
        print(f"å°Pï¼šå¥½çš„ï¼Œå‡†å¤‡å¬æˆ‘å¤§æ˜¾èº«æ‰‹å§ï¼")
        gushi.tell_a_story()
        print(f"\\nå°Pï¼šæ•…äº‹è®²å®Œå•¦ï¼æˆ‘ä»¬ç»§ç»­èŠå¤©å§ï¼")

    elif ("éšæœºé­”æ³•" in user_input or "é­”æ³•" in user_input) and magic_module_found:
        print(f"å°Pï¼šå¥½çš„ï¼Œå‡†å¤‡å¥½è§è¯å¥‡è¿¹äº†å—ï¼Ÿè¿›å…¥éšæœºé­”æ³•å±‹ï¼")
        random_magic.magic_handler.run_random_magic_menu()
        print(f"\\nå°Pï¼šé­”æ³•æ—¶é—´ç»“æŸã€‚æˆ‘ä»¬ç»§ç»­èŠå¤©å§ï¼")

    elif ("çŸ¥è¯†åº“" == user_input.lower() or "æ•™ä½ " in user_input) and kb_module_found:
        print(f"å°Pï¼šå¥½çš„ï¼Œæˆ‘ä»¬æ¥æ¢ç´¢ä¸€ä¸‹æˆ‘çš„çŸ¥è¯†åº“å§ï¼")
        local_kb.kb_handler.run_knowledge_menu()
        print(f"\\nå°Pï¼šçŸ¥è¯†åº“äº’åŠ¨ç»“æŸã€‚è¿˜æœ‰å…¶ä»–æƒ³èŠçš„å—ï¼Ÿ")

    else:  # é»˜è®¤å›å¤é€»è¾‘
        found_answer = False
        # ä¼˜å…ˆæ£€æŸ¥çŸ¥è¯†åº“
        if kb_module_found:
            kb_answer = local_kb.kb_handler.query_knowledge_base(user_input)
            if kb_answer:
                print(f"å°Pï¼š{kb_answer}")
                found_answer = True

        # å¦‚æœçŸ¥è¯†åº“æ²¡æœ‰ï¼Œå†æ£€æŸ¥é¢„è®¾çš„ç®€å•å›å¤
        if not found_answer:
            if user_input.lower() in responses:
                print(f"å°Pï¼š{responses[user_input.lower()]}")
                found_answer = True
            elif "ä½ å¥½" in user_input.lower():
                print("å°Pï¼šä½ å¥½å‘€ï¼å¾ˆé«˜å…´è®¤è¯†ä½ ï¼")
                found_answer = True

        # å¦‚æœéƒ½æ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆ
        if not found_answer:
            default_responses = [
                "å—¯...ä½ è¯´çš„è¿™ä¸ªæˆ‘è¿˜åœ¨å­¦ä¹ ä¸­å‘¢ã€‚",
                "è¿™ä¸ªé—®é¢˜æœ‰ç‚¹æ·±å¥¥ï¼Œæˆ‘å¾—å›å»æŸ¥æŸ¥ä¹¦ï¼",
                "ä½ å¯ä»¥è¯•è¯•é—®æˆ‘â€œä½ ä¼šåšä»€ä¹ˆâ€ï¼Œæˆ–è€…é€šè¿‡â€œçŸ¥è¯†åº“â€åŠŸèƒ½æ•™æˆ‘ä¸€äº›æ–°ä¸œè¥¿å“¦ï¼",
                "æˆ‘å¯¹è¿™ä¸ªè¿˜ä¸å¤ªäº†è§£ï¼Œèƒ½æ¢ä¸ªè¯é¢˜å—ï¼Ÿ"
            ]
            print(f"å°Pï¼š{random.choice(default_responses)}")`
                }
            }
        };

        const masteredFragments = {};

        function initializeMasteryTracker() {
             ['JOKE.1', 'JOKE.2', 'JOKE.3', 'JOKE.4', 'WEATHER.1', 'WEATHER.2', 'WEATHER.3', 'WEATHER.4', 'WEATHER.5', 'WEATHER.6'].forEach(key => {
                masteredFragments[key] = false;
            });
        }

        function markSetupStepComplete(currentStepId, nextStepId) {
            const currentStepEl = document.getElementById(currentStepId);
            currentStepEl.style.borderColor = "#28a745";
            const button = currentStepEl.querySelector('button');
            button.disabled = true;
            button.textContent = "å·²å®Œæˆ âœ”ï¸";
            if (nextStepId) {
                const nextStepEl = document.getElementById(nextStepId);
                if(nextStepEl) {
                    nextStepEl.classList.remove('hidden');
                    const firstSubStep = nextStepEl.querySelector('.concept-block');
                    if(firstSubStep) firstSubStep.classList.remove('hidden');
                    nextStepEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
        }
        
        function checkConceptQuiz(radioName, correctAnswer, feedbackId, nextConceptId, unlockButtonId) {
            const selectedOption = document.querySelector(`input[name="${radioName}"]:checked`);
            const feedbackEl = document.getElementById(feedbackId);
            const quizButton = feedbackEl.closest('.quiz-question').querySelector('button');
            if (!selectedOption) {
                feedbackEl.innerHTML = "<p class='result incorrect'>è¯·é€‰æ‹©ä¸€ä¸ªç­”æ¡ˆï¼</p>";
                feedbackEl.classList.remove('hidden');
                return;
            }
            if (selectedOption.value === correctAnswer) {
                feedbackEl.innerHTML = "<p class='result correct'>å›ç­”æ­£ç¡®ï¼ä½ ç†è§£äº†è¿™ä¸ªåŸºç¡€æ¦‚å¿µï¼ğŸ‘</p>";
                quizButton.disabled = true;
                if (nextConceptId) {
                    setTimeout(() => {
                        const nextEl = document.getElementById(nextConceptId);
                        if(nextEl) nextEl.classList.remove('hidden');
                    }, 500);
                } else if (unlockButtonId) {
                     document.getElementById(unlockButtonId).classList.remove('hidden');
                }
            } else {
                feedbackEl.innerHTML = "<p class='result incorrect'>å›ç­”é”™è¯¯ï¼Œå†ä»”ç»†çœ‹çœ‹è®²è§£å“¦ï¼ğŸ¤”</p>";
            }
            feedbackEl.classList.remove('hidden');
        }

        function revealCodeDraft(areaId, firstLearnId) {
            const area = document.getElementById(areaId);
            if (!area) return;
            area.classList.remove('hidden');
            if (area.closest('.quest-section')) {
                area.closest('.quest-section').classList.remove('hidden');
            }
            const childContent = area.querySelector('.final-code-container');
            if(childContent) childContent.classList.remove('hidden');
            if (firstLearnId) {
                document.getElementById(firstLearnId).classList.remove('hidden');
            }
            const unlockButton = document.querySelector(`button[onclick*="${areaId}"]`);
            if(unlockButton) unlockButton.classList.add('hidden');
            area.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function checkCodeDrilldownQuiz(radioName, correctAnswer, feedbackId, draftDisplayId, fragmentKey, nextLearnId, finalCodeContainerId) {
            const selectedOption = document.querySelector(`input[name="${radioName}"]:checked`);
            const feedbackEl = document.getElementById(feedbackId);
            const quizButton = feedbackEl.closest('.quiz-question').querySelector('button');
            if (!selectedOption) {
                feedbackEl.innerHTML = "<p class='result incorrect'>è¯·é€‰æ‹©ä¸€ä¸ªç­”æ¡ˆï¼</p>";
                feedbackEl.classList.remove('hidden');
                return;
            }

            if (selectedOption.value === correctAnswer) {
                feedbackEl.innerHTML = `<p class='result correct'>ç†è§£æ­£ç¡®ï¼è¿™æ®µä»£ç çš„å¥¥ç§˜è¢«ä½ æ­å¼€äº†ï¼ğŸ‘</p>`;
                quizButton.disabled = true;
                masteredFragments[fragmentKey] = true;

                if (nextLearnId) {
                    setTimeout(() => {
                        const nextEl = document.getElementById(nextLearnId);
                        if(nextEl) nextEl.classList.remove('hidden');
                        nextEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 500);
                } else {
                     let allMastered = true;
                     const prefix = fragmentKey.split('.')[0];
                     for(const key in masteredFragments) {
                         if(key.startsWith(prefix) && !masteredFragments[key]) {
                             allMastered = false;
                             break;
                         }
                     }
                     if(allMastered && finalCodeContainerId) {
                         const finalCodeEl = document.getElementById(finalCodeContainerId);
                         if(finalCodeEl) {
                            finalCodeEl.classList.remove('hidden');
                            finalCodeEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
                         }
                     }
                }
            } else {
                feedbackEl.innerHTML = "<p class='result incorrect'>å›ç­”é”™è¯¯ï¼Œå†ä»”ç»†çœ‹çœ‹ä»£ç ç‰‡æ®µå’Œè§£é‡Šå“¦ï¼ğŸ¤”</p>";
            }
            feedbackEl.classList.remove('hidden');
        }

        function copyCodeToClipboard(codeKey, buttonElement) {
            const codeToCopy = questData.api.codeToCopy[codeKey];
            navigator.clipboard.writeText(codeToCopy).then(() => {
                const originalText = buttonElement.textContent;
                buttonElement.textContent = 'å¤åˆ¶æˆåŠŸ!';
                buttonElement.style.backgroundColor = '#28a745';
                setTimeout(() => { 
                    buttonElement.textContent = originalText;
                    buttonElement.style.backgroundColor = '#0078d4'; 
                }, 2000);
            });
        }
        
        window.onload = function() {
            initializeMasteryTracker();
            const questInfo = questData.api;
            document.getElementById('joke-api-final-code-content').textContent = questInfo.codeToCopy.joke;
            document.getElementById('weather-api-final-code-content').textContent = questInfo.codeToCopy.weather;
            document.getElementById('mian-py-final-code-content').textContent = questInfo.codeToCopy.mian;
            
            const firstQuestSection = document.querySelector('.quest-section');
            firstQuestSection.classList.remove('hidden');
            firstQuestSection.querySelector('.setup-step').classList.remove('hidden');
        };
    </script>

</body>
</html>